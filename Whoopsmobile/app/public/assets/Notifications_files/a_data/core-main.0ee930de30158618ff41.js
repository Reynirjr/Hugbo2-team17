!function(){var t,e,n,r,o={6866:function(t,e,n){"use strict";n.d(e,{Db:function(){return j},FP:function(){return m},G2:function(){return p},G_:function(){return h},JZ:function(){return v},LM:function(){return a},P4:function(){return b},QU:function(){return y},XI:function(){return l},ZW:function(){return O},aU:function(){return c},cc:function(){return i},hR:function(){return g},nd:function(){return w},pK:function(){return d},rh:function(){return o},rr:function(){return u},sv:function(){return s},vn:function(){return r},yW:function(){return f}});var r="onConversationCreate",o="onMessageSent",i="onMessageReceived",u="onUnreadCountChange",a="onConversationEnded",c="onAssistantEnded",s="onConversationUnended",l="onSatisfactionReceived",f="onAgentTypingActivity",d="onConversationMerged",v="onCustomerDelete",p="onConversationDeleted",b="onSessionTitleChanged",m="onUrlPreviewReceived",y="onLogin",g="onLogout",h="x-kustomer-chat-messages-global-poller",w=25,O=100,j=100},2838:function(t,e,n){"use strict";n.d(e,{eI:function(){return a},s5:function(){return u},AG:function(){return i},N0:function(){return o}});var r=n(3182),o=function(t){if(null==t||!t.assistant)return new Error("Missing one or more of the required properties: assistant")},i=function(t){var e=t.lang,n=(0,r.A0)(e),o="/c/v1/chat/assistant/init";return n&&(o="".concat(o,"?lang=").concat(n)),o},u=function(t){return"/c/v2/chat/assistant/sessions/".concat(t,"/deflections")},a=new Map},3712:function(t,e,n){"use strict";n.d(e,{fH:function(){return d},He:function(){return f},BQ:function(){return l}});var r=n(9591),o=n(4552),i=n(9111);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return(e=function(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(t){var e=t.attributes,n=t.custom,o=function(t){var e=null==t?void 0:t.attributes,n=null==t?void 0:t.custom;return e||n?e?function(t){var e,n=["emails","phones","socials"],r=["sharedEmails","sharedPhones","sharedSocials"].concat(n);return Object.entries(t).every((function(t){var o,i,u=t[0],a=t[1];return n.includes(u)&&console.warn("Kustomer: The attribute ".concat(u," is deprecated. Please use shared").concat(u.charAt(0).toUpperCase()).concat(u.slice(1)," instead.")),r.includes(u)?"socials"!==u&&"sharedSocials"!==u||(i=["twitter","instagram","facebook","linkedin"],a.every((function(t){return t.type&&t.username?!!i.includes(t.type)||(o=new Error("".concat(t.type," is not a valid social type. Socials must be one of: twitter, instagram, linkedin, facebook")),!1):(o=new Error("Social is missing one or more of the required properties: username, type"),!1)})),!(e=o)):(e=new Error("".concat(u," is not a valid attribute. Attributes must contain at least one of: sharedEmails, sharedPhones, sharedSocials")),!1)})),e}(e):void 0:new Error("Missing one or more of the required properties: attributes, customAttributes")}(t);return o?Promise.reject(o):(0,r.F6)("/c/v1/customers/current",{body:JSON.stringify(c(c({},e),{},{custom:n}))})},f=function(){return(0,r.Jt)("/c/v1/chat/customers/current").then((function(t){return(0,o.fF)("customerContext",function(t){var e,n,r,o,i,u,a=(null==t||null===(e=t.data)||void 0===e?void 0:e.attributes)||{},c=a.activityAt,s=a.createdAt,l=a.lastMessageAt,f=a.lastMessageSentAt,d=a.lastOutboundMsgSentAt,v=a.lastSeenAt,p=a.signedUpAt,b=a.lastMessageUnrespondedTo,m=a.avgSatisfactionRating,y=a.avgSatisfactionScore,g=a.name,h=a.email,w=a.phone,O=a.sentiment,j=a.company,S=a.custom,P=(null==t||null===(n=t.data)||void 0===n||null===(r=n.attributes)||void 0===r?void 0:r.conversationCount)||{};return{activityAt:c,createdAt:s,lastMessageAt:l,lastMessageSentAt:f,lastMessageOutSentAt:d,lastSeenAt:v,signedUpAt:p,lastMessageUnrespondedToSentAt:b,satisfactionLevel:{avgRating:m,avgScore:y},conversationCounts:{all:P.all,done:P.done,open:P.open,snoozed:P.snoozed},name:g,email:h,phone:w,sentiment:O,company:j,createdBy:((null==t||null===(o=t.data)||void 0===o||null===(i=o.relationships)||void 0===i||null===(u=i.createdBy)||void 0===u?void 0:u.data)||{}).id,custom:S}}(t)),t}))},d=function(t){return(0,r.Jt)(i.aO).then((function(e){var n=e.data.attributes,r={total:n.totalUnreadCount,conversations:c({},n.sessionsWithUnreads)};return(0,o.NT)(r),"function"==typeof t&&t(),r}))}},6127:function(t,e,n){"use strict";n.d(e,{oH:function(){return v},R9:function(){return m},Nz:function(){return b},ML:function(){return p}});var r=n(7556),o=n(9591);function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var u=function(t){if(null==t||!t.length)return Promise.reject();var e=function(t){return t.find((function(t){return!t.file}))?new Error("Attachment is missing one or more of the required properties: file"):function(t){var e,n=0;return t.every((function(t){return n+=t.size,e=function(t){if(t.size>5e6)return new Error("Individual attachment file size is greater than 5MB")}(t),!e})),e||(n>9e6?new Error("Total attachments file size is greater than 9MB"):void 0)}(t.map((function(t){return t.file})))||void 0}(t);if(e)return Promise.reject(e);var n=t.reduce((function(t,e){var n,u,a,c=(u=(n=e).file,(0,r.a)().then((function(){var t;return(0,o.bE)("/c/v1/chat/attachments",{body:JSON.stringify({contentLength:u.size,contentType:u.type,name:u.name})}).then((function(e){return t=e,function(t,e){var n;if(null==e||null===(n=e.meta)||void 0===n||!n.upload)return Promise.reject();var r=e.meta.upload,i=r.fields,u=r.url,a=new FormData;return Object.entries(i).forEach((function(t){a.append(t[0],t[1])})),a.append("file",t.file),(0,o.hl)(u,a)}(n,e)})).then((function(){return t}))})));return[].concat(function(t){if(Array.isArray(t))return i(t)}(a=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(a)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[c])}),[]);return Promise.all(n)},a=n(3182),c=function(t,e){var n=t.lang,r=(0,a.A0)(n);return r?"".concat(e,"?lang=").concat(r):e};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return(e=function(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t,e){var n=function(t,e){if(!t)return new Error("A conversationId must be provided.");var n=null==e?void 0:e.body,r=null==e?void 0:e.attachments;return n||null!=r&&r.length?void 0:new Error("Message is missing one or more of the required properties: body or attachments")}(t,e);if(n)return Promise.reject(n);var i=null==e?void 0:e.body,a=null==e?void 0:e.payload,s=null==e?void 0:e.attachments,l=null==e?void 0:e.lastDeflection,d=null==e?void 0:e.isInAssistantMode,v=null==e?void 0:e.initAssistantPayload;return(0,r.a)().then((function(){if(null!=s&&s.length)return u(s)})).then((function(n){var r,u,s;n&&(s=n.map((function(t){var e;return null==t||null===(e=t.data)||void 0===e?void 0:e.id})));var p={session:t,body:i,payload:a,lastDeflection:l,attachments:s,assistant:null==v?void 0:v.assistant,dialog:null==v?void 0:v.dialog,node:null==v?void 0:v.node,initialMessages:null==v?void 0:v.initialMessages},b=null!=e&&null!==(r=e.assistantOptions)&&void 0!==r&&r.emulation?f(f({},p),{},{assistantOptions:null==e?void 0:e.assistantOptions}):p;return d?(0,o.bE)(c(e,"/c/v2/chat/assistant/messages"),{body:JSON.stringify(b)}):(0,o.bE)(c(e,"/c/v2/chat/messages"),{body:JSON.stringify({session:t,body:i,payload:a,lastDeflection:l,attachments:s,initialMessages:null==v?void 0:v.initialMessages,initialMessagesUserId:null==v||null===(u=v.attributes)||void 0===u?void 0:u.aiUserId})})}))},p=function(t){return(0,o.Jt)(function(t){return"/c/v1/chat/messages/".concat(t,"/attachments")}(t))},b=function(t,e){return(0,o.Jt)(function(t,e){var n="/c/v2.1/chat/sessions/".concat(t,"/messages?count=").concat(e.count);return e.before?"".concat(n,"&before=").concat(e.before):n}(t,e))},m=function(t){return new Promise((function(e){setTimeout((function(){e(p(t))}),400)}))}},5506:function(t,e,n){"use strict";n.d(e,{FQ:function(){return i},ZE:function(){return u},gU:function(){return a},jk:function(){return o}});var r=n(3182),o=function(t,e){if(!t)return new Error("A satisfactionId must be provided.");var n=e.rating,r=e.answers;return r&&r.find((function(t){var e;return(null===(e=t.answer)||void 0===e?void 0:e.length)>1024}))?new Error("Answers cannot exceed 1024 characters"):n&&("number"!=typeof n||n>10||n<1)?new Error("Rating must be a number between 1 and 10"):void 0},i=function(t,e,n){var r,o,i,u,a,c,s={},l=null==t||null===(r=t.relationships)||void 0===r||null===(o=r.conversation)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.id,f=null==t||null===(u=t.relationships)||void 0===u||null===(a=u.session)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.id;if(!t||!n||!l&&!f)return s;var d=t.id,v=t.attributes,p=v.rating,b=v.answers,m=v.createdAt,y=v.lockedAt;s.conversationId=l||f,s.satisfactionId=d;var g=m;if(e){var h=Number(e)/1e4;g=new Date(h).toISOString()}if(s.timetoken=g,s.lockedAt=y,s.response={rating:p,answers:b},n){var w=n.attributes,O=w.description,j=w.introduction,S=w.name,P=w.questions,A=w.ratingPrompt,_=w.scale;s.form={description:O,introduction:j,name:S,questions:P,ratingPrompt:A,scale:_}}return s},u=function(t,e){var n=(0,r.A0)(e),o="/c/v3/chat/satisfaction-responses/".concat(t,"?include=satisfaction");return n&&(o+="&lang=".concat(n)),o},a=function(t,e){var n=(0,r.A0)(e),o="/c/v3/chat/satisfaction/".concat(t,"/translated-form");return n&&(o+="?lang=".concat(n)),o}},9238:function(t,e,n){"use strict";n.d(e,{B:function(){return r}});var r="/p/v1/schedules/:scheduleId?include=holidays"},9111:function(t,e,n){"use strict";n.d(e,{$e:function(){return r},aO:function(){return o}});var r="/c/v2/chat/sessions",o="/c/v2/chat/session-stats"},6649:function(t,e,n){"use strict";n.d(e,{jw:function(){return b},Ht:function(){return y},S5:function(){return m},CU:function(){return w},qO:function(){return g},WE:function(){return h}});var r=n(4552),o=n(7556),i=n(9591),u=n(3415),a=n(3182),c=n(9111),s=function(t){if(!t)return new Error("A conversationId must be provided.")},l=function(t){return"/c/v2/chat/sessions/".concat(t)};function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return(e=function(t){var e=function(t){if("object"!=f(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){var e=function(t){var e=null==t?void 0:t.title;if(e&&(0,u.Kg)(e)&&e.length>256)return new Error("Title must be less than or equal to 256 characters")}(t);return e?Promise.reject(e):(0,o.a)().then((function(){return(0,i.bE)(function(t){var e=null==t?void 0:t.lang,n=(0,a.A0)(e);return n?"/c/v2.1/chat/sessions?lang=".concat(n):"/c/v2.1/chat/sessions"}(t),{body:JSON.stringify({title:t.title,assistant:t.assistant,brand:t.brand,custom:t.custom})}).then((function(t){var e=t.data.relationships.customer.data.id;return(0,r.fF)("customerId",e),(0,r.Y_)(t.data),t}))}))},m=function(t){return(0,i.Jt)((e=t,n=c.$e,o=null==e?void 0:e.page,u=null==e?void 0:e.pageSize,a=null==e?void 0:e.brandId,s=[],o&&s.push("page=".concat(o)),u&&s.push("pageSize=".concat(u)),a&&s.push("brandId=".concat(a)),s.length&&(n="/c/v2/chat/sessions?".concat(s.join("&"))),n)).then((function(t){var e=null==t?void 0:t.data.filter((function(t){var e,n=null==t||null===(e=t.attributes)||void 0===e?void 0:e.pubnub;return n&&!(null!=n&&n.error)}));return null==e||e.forEach((function(t){(0,r.Y_)(t)})),v(v({},t),{},{data:e})}));var e,n,o,u,a,s},y=function(t){var e=s(t);return e?Promise.reject(e):(0,i.Jt)(l(t)).then((function(t){return(0,r.Y_)(t.data),t}))},g=function(t,e){var n=s(t);return n?Promise.reject(n):(0,i.yJ)(l(t),{body:JSON.stringify(e)}).then((function(t){return(0,r.Y_)(t.data),t}))},h=function(t){var e=null==t?void 0:t.body;return(0,i.F6)(function(t){var e=null==t?void 0:t.sessionId,n=null==t?void 0:t.messageIds;return"/c/v2/chat/sessions/".concat(e,"/messages/").concat(n)}(t),{body:JSON.stringify(e)})},w=function(t){var e=s(t);return e?Promise.reject(e):(0,i.F6)(function(t){return"/c/v2/chat/sessions/".concat(t,"/markAsRead")}(t))}},7556:function(t,e,n){"use strict";n.d(e,{u:function(){return u},a:function(){return a}});var r,o=n(3566),i=n(9591),u=function(){return(0,i.Jt)("/c/v1/tracking/tokens/current").then((function(t){var e=t.data.attributes.token;return(0,o.KI)(e),t}))},a=function(){return(0,o.Fb)()?Promise.resolve():r||(r=u().then((function(){r=void 0})))}},7162:function(t,e,n){"use strict";n.d(e,{IZ:function(){return i}});var r="https",o=null==="https://api.kustomerapp.com"?void 0:"https://api.kustomerapp.com".replace("".concat(r,"://"),""),i=function(){return{protocol:r,baseUrlDomain:o}}},4513:function(t,e,n){"use strict";n.d(e,{_:function(){return I}});var r=n(3566),o=n(7162),i=n(5401),u=n.n(i);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var c=function(t){var e=(0,r.d9)();if(e&&e.contentWindow){var n=e.contentWindow,o=null==n?void 0:n.KustomerMain;if(n&&o&&o[t]&&o[t]){for(var i=arguments.length,u=new Array(i>1?i-1:0),a=1;a<i;a++)u[a-1]=arguments[a];return o[t].apply(o,u)}}};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return(e=function(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(){return window},p=function(){var t=v();if(t)return t.KustomerCore},b=function(){var t=v(),e=p();t.addEventListener("kustomer_core_main_ready",(function(){e&&(function(){var t=p();t&&u()(t,{init:function(t,e){return c("init",t,e)},createConversation:function(t,e){return c("createConversation",t,e)},handoff:function(t,e){return c("handoff",t,e)},addListener:function(t,e){return c("addListener",t,e)},removeListener:function(t,e){return c("removeListener",t,e)},sendMessage:function(t,e){return c("sendMessage",t,e)},getConversations:function(t,e){return c("getConversations",t,e)},getConversation:function(t,e){return c("getConversation",t,e)},getMessages:function(t,e){return c("getMessages",t,e)},getHistoricalMessages:function(t,e){return c("getHistoricalMessages",t,e)},getAssistant:function(t){return c("getAssistant",t)},markRead:function(t){return c("markRead",t)},markSessionAsRead:function(t){return c("markSessionAsRead",t)},getUnreadCount:function(){return c("getUnreadCount")},endConversation:function(t,e){return c("endConversation",t,e)},initAssistant:function(t,e){return c("initAssistant",t,e)},sendKbDeflectionClick:function(t,e){return c("sendKbDeflectionClick",t,e)},isChatAvailable:function(){return c("isChatAvailable")},getChatSettings:function(){return c("getChatSettings")},submitSatisfactionForm:function(t,e){c("submitSatisfactionForm",t,e)},getTranslatedSatisfactionForm:function(t,e){c("getTranslatedSatisfactionForm",t,e)},sendTypingActivity:function(t){return c("sendTypingActivity",t)},login:function(t,e){return c("login",t,e)},isLoggedIn:function(t,e){return c("isLoggedIn",t,e)},describeCustomer:function(t,e){return c("describeCustomer",t,e)},describeConversation:function(t,e){return c("describeConversation",t,e)},getCategories:function(t,e){return c("getCategories",t,e)},getArticles:function(t,e){return c("getArticles",t,e)},getFeaturedArticles:function(t,e){return c("getFeaturedArticles",t,e)},getArticleById:function(t,e){return c("getArticleById",t,e)},getArticleBySlug:function(t,e){return c("getArticleBySlug",t,e)},submitArticleFeedback:function(t,e){return c("submitArticleFeedback",t,e)},updateArticleFeedback:function(t,e){return c("updateArticleFeedback",t,e)},getKnowledgeBaseConfig:function(t){return c("getKnowledgeBaseConfig",t)},searchArticles:function(t,e){return c("searchArticles",t,e)},isUrlAllowed:function(t){return c("isUrlAllowed",t)},logout:function(t){return c("logout",t)},sendPresenceActivity:function(t){return c("sendPresenceActivity",t)},stop:function(){return c("stop")},kustomerEventCount:function(e){c("kustomerEventCount",f(f({},e),{},{apiKey:t.a}))},kustomerEventTimerStart:function(e){c("kustomerEventTimerStart",f(f({},e),{},{apiKey:t.a}))},kustomerEventTimerStop:function(e){c("kustomerEventTimerStop",f(f({},e),{},{apiKey:t.a}))}})}(),function(t){t.q.forEach((function(e){var n,r,o=Object.keys(e)[0],i=e[o],u=null===(n=t[o])||void 0===n?void 0:n.bind(t);if(u)return i?u.apply(void 0,function(t){if(Array.isArray(t))return a(t)}(r=i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):u()}))}(e))}))};function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t,e,n){return(e=function(t){var e=function(t){if("object"!=m(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==m(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}!function(){var t,e;b();var n="/release-v0.1.428/core-main.js",o=document.querySelectorAll("[data-kustomer-api-key]")[0],i=(null===(t=(e=window).KustomerGetNonce)||void 0===t?void 0:t.call(e,o))||(null==o?void 0:o.getAttribute("nonce"))||void 0,u=(0,r.XL)(window);if(!u||v()===u){var a=document.createElement("body"),c=document.createElement("script");c.id="kustomer-core-main",c.src=n;var s=(null==o?void 0:o.getAttribute("data-kustomer-api-key"))||void 0;return s&&c.setAttribute("data-kustomer-api-key",s),i&&c.setAttribute("nonce",i),a.appendChild(c),void(0,r.Vj)("kustomer-core-sdk-iframe","display: none",a.outerHTML,"Kustomer Core SDK Iframe",i)}if(!document.getElementById("kustomer-core-main")){var l=document.createElement("script");l.id="kustomer-core-main",l.src=n,i&&l.setAttribute("nonce",i),(0,r.hR)(l)}}();var w,O,j,S,P,A=function(t){try{if(!t)throw new Error;var e=(o=t.split("."),i=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}}(o,i)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=(e[0],e[1]),r=JSON.parse(atob(n));return function(t){["orgName"].every((function(e){return e in t}))||console.error("You've provided an invalid Kustomer api key.")}(r),r}catch(t){return console.error("You've provided an invalid Kustomer api key."),{}}var o,i}((S=v(),(null==(P=(0,r.XL)(S)||S)||null===(w=P.Kustomer)||void 0===w?void 0:w.a)||(null===(O=P.KustomerCore)||void 0===O?void 0:O.a)||(null==S||null===(j=S.KustomerCore)||void 0===j?void 0:j.a))),_=A.orgName,k=A.pod,I=function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({pod:k,orgName:_},(0,o.IZ)())}},3041:function(t,e,n){"use strict";n.d(e,{M:function(){return u},v:function(){return i}});var r=n(6866),o=n(4552),i=function(t){return!![r.vn,r.rh,r.cc,r.rr,r.LM,r.sv,r.aU,r.XI,r.yW,r.QU,r.hR,r.pK,r.JZ,r.G2,r.P4,r.FP].includes(t)||(console.error("Provided Kustomer event type is invalid: ".concat(t)),!1)},u=function(t,e,n){var r=(0,o.KA)().listeners[t];null!=r&&r.length&&r.forEach((function(t){e||n?t(e,n):t()}))}},3415:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{E$:function(){return i},Kg:function(){return u},RC:function(){return a},iv:function(){return o}});var o=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=function(t){if(Array.isArray(t))return r(t)}(e=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(n<=0)return o;for(;i.length;)o.push(i.splice(0,n));return o},i=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.filter((function(t){return n.every((function(e){return e.includes(t)}))}))},u=function(t){return"string"==typeof t},a=function(){var t=window;if(!t||!t.KustomerMain)throw Error("KustomerMain object not found");return t.KustomerMain}},2805:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(4552),o=function(t){return Promise.all([n.e("vendors-node_modules_pubnub_dist_web_pubnub_min_js"),n.e("pubnub")]).then(n.bind(n,4482)).then((function(e){if(!t)return e;var n=t.customerId,o=t.orgId,i=t.cb;return(0,r.KA)().isPubNubConnected?e:e.initializePubNub({customerId:n,orgId:o,cb:i}).then((function(){return e}))}))}},2327:function(t,e,n){"use strict";n.d(e,{t:function(){return u}});var r=n(4552),o=n(6649),i=n(4601),u=function(t,e){return function(t){var e=(0,r.kk)(t);return e?Promise.resolve(e):(0,o.Ht)(t).then((function(){return(0,r.kk)(t)}))}(t).then((function(n){var o,u,a,c=null==n||null===(o=n.attributes)||void 0===o||null===(u=o.pubnub)||void 0===u||null===(a=u.data)||void 0===a?void 0:a.channels,s=(0,r.KA)(),l=s.settings,f=l.showTypingIndicatorCustomerWeb,d=l.showTypingIndicatorWeb;if(c&&(f||d)){var v=c.find((function(t){return"conversation"===t.type}));if(v&&s.isPubNubConnected){var p=v.name.replace("ext-convo-","shrd-convo-");if(p.length){var b,m=null===(b=e.getMetaPubNub())||void 0===b?void 0:b.instance;m?m.subscribe({channels:[p]}):(0,i.H)(new Error("MetaPubNub instance not available"),{message:"Failed to subscribe to typing indicator channel for conversation ".concat(t,": MetaPubNub instance not available")})}}}})).catch((function(e){(0,i.H)(e,{message:"Failed to subscribe to typing indicator channel for conversation ".concat(t)})}))}},4619:function(t,e,n){"use strict";n.d(e,{$L:function(){return u},A4:function(){return a},AP:function(){return S},Cx:function(){return v},FJ:function(){return l},KE:function(){return O},MZ:function(){return i},Mx:function(){return p},Nl:function(){return y},RT:function(){return o},UM:function(){return b},YA:function(){return P},ZG:function(){return c},ci:function(){return s},gV:function(){return d},iR:function(){return g},jC:function(){return j},nV:function(){return f},sX:function(){return m},us:function(){return r},x0:function(){return A},xV:function(){return h},y8:function(){return w}});var r="PNSubscribeOperation",o="PNAccessDeniedCategory",i="PNReconnectedCategory",u="PNNetworkUpCategory",a="PNNetworkDownCategory",c=["PNNetworkIssuesCategory","PNBadRequestCategory",o],s="kustomer.app.chat.session.end",l="kustomer.assistant.chat.session.end",f="kustomer.app.chat.message.receive",d="kustomer.app.chat.message.send",v="kustomer.app.chat.session.update",p="kustomer.app.chat.session.delete",b="kustomer.app.chat.csat.send",m="kustomer.app.chat.csat.submit",y="kustomer.app.chat.session_merge.create",g="kustomer.app.chat.url.unfurled.send",h="kustomer.app.chat.url.unfurled.receive",w="kustomer.customer.delete",O="user-typing",j="user-typing-ended",S="ai-assistant-user-typing",P="customer-typing-ended",A="customer-typing"},9860:function(t,e,n){"use strict";n.d(e,{t0:function(){return r},u$:function(){return i},u9:function(){return o}});var r=function(t,e){return"ext-convo-group-".concat(e,".cust-").concat(t)},o=function(t,e){return"ext-meta-cust-".concat(e,".cust-").concat(t)},i=function(t,e){return"shrd-cust-".concat(e,".cust-").concat(t)}},1127:function(t,e,n){"use strict";n.d(e,{s:function(){return o}});var r={logError:function(t,e){return console.error(t,e)}};function o(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).logError,n=void 0===e?r.logError:e;try{var o,i,u,a,c,s,l=t;if(null!==(o=l.data)&&void 0!==o&&o.attributes){var f=l.data,d=f.attributes;u=f.id,a=d.originalMessageId,c=d.sessionId,s=d.unfurledUrl}else{var v=l.payload||l.data;if(!v||!v.data)return n("Invalid URL unfurled message format: missing payload.data or data.attributes",t),null;u=(i=v.data).id,a=i.originalMessageId,c=i.sessionId,s=i.unfurledUrl}return u&&a&&c&&s?s.url?{id:u,originalMessageId:a,sessionId:c,unfurledUrl:{url:s.url,title:s.title,description:s.description,image:s.image,favicon:s.favicon,unfurledAt:s.unfurledAt},conversationId:c}:(n("Invalid URL unfurled message: missing unfurledUrl.url",{unfurledUrl:s}),null):(n("Invalid URL unfurled message: missing required fields",{id:u,originalMessageId:a,sessionId:c,unfurledUrl:s}),null)}catch(t){return n("Failed to parse URL unfurled message",t),null}}},9591:function(t,e,n){"use strict";n.d(e,{F6:function(){return h},Jt:function(){return m},bE:function(){return y},hl:function(){return p},yJ:function(){return g}});var r=n(3566),o=n(4552),i=n(9238),u=n(4513),a=n(5564),c=n(6866);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return(e=function(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){if("No Content"!==t.statusText){var e=t.headers.get("content-type");if(!e||!e.includes("application/json"))return null;var n=t.headers.get(c.G_);return n&&(0,r.Vl)(n),t.ok?null==t?void 0:t.json():function(t){return t.json().then((function(e){var n=function(t){var e,n,r=t[0],o=null==r||null===(e=r.meta)||void 0===e||null===(n=e.subErrors)||void 0===n?void 0:n[0],i=r.title,u=r.code,a=r.source;if(o){var c=o.title;return{code:o.code,title:c,source:o.source.pointer}}return{source:(null==a?void 0:a.parameter)||(null==a?void 0:a.pointer),title:i,code:u}}(e.errors),r="".concat(null==t?void 0:t.status," ").concat(null==t?void 0:t.statusText," to ").concat(null==t?void 0:t.url);"badparam"===n.code&&(r="".concat(null==n?void 0:n.title,": ").concat(null==n?void 0:n.source));var o=new Error(r);throw o.title=null==n?void 0:n.title,o.status=t.status?"".concat(t.status):"",o.source=null==n?void 0:n.source,o.url=null==t?void 0:t.url,o.type=null==t?void 0:t.type,o}))}(t)}},p=function(t,e){return fetch(t,{method:"POST",body:e}).then((function(t){return v(t)}))},b=function(t,e){var n,c=(0,u._)(),s=c.protocol,l=c.orgName,d=c.baseUrlDomain;if(void 0===l)return Promise.reject(new Error("Missing org"));var p=(0,o.KA)(),b=null==p||null===(n=p.settings)||void 0===n?void 0:n.enabled,m=[i.B];if(!1===b&&!m.includes(t))return Promise.reject(new Error("Could not complete request because Kustomer Chat is disabled in your org settings"));var y="".concat(s,"://").concat(l,".").concat(d).concat(t),g=function(t){var e=(0,r.Fb)()||"",n=new Headers({"Content-Type":"application/json","x-kustomer":"kustomer","x-kustomer-client":"chat-web","x-kustomer-tracking-token":e,credentials:"include"});return f(f({},t),{},{headers:n})}(e),h=(0,a.SQ)(t,null==e?void 0:e.method);return null!=e&&e.ignoreTracking||(0,a._s)({name:h}),fetch(y,g).then((function(t){return v(t)})).finally((function(){null!=e&&e.ignoreTracking||(0,a.wb)({name:h})}))},m=function(t,e){var n=f({method:"GET"},e);return b(t,n)},y=function(t,e){var n=f({method:"POST"},e);return b(t,n)},g=function(t,e){var n=f({method:"PUT"},e);return b(t,n)},h=function(t,e){var n=f({method:"PATCH"},e);return b(t,n)}},991:function(t,e,n){"use strict";n.d(e,{b:function(){return r}});var r=function(t){var e=t.id,n=t.attributes;return{conversationId:e,createdAt:n.createdAt,ended:!!n.lockedAt}}},3064:function(t,e,n){"use strict";n.d(e,{$:function(){return r},u:function(){return o}});var r=function(t){var e=t.attributes,n=e.htmlBody,r=e.metaDescription,o=e.title,i=e.article,u=e.updatedAt,a=e.lang,c=e.slug,s=e.hash,l=e.kbUrl,f=e.knowledgeBaseId;return{articleId:"string"==typeof i?i:null==i?void 0:i._id,htmlBody:n,title:o,description:r,updatedAt:u,lang:a,slug:c,hash:s,version:t.id,kbUrl:l,knowledgeBaseId:f}},o=function(t){return{articles:t}}},9774:function(t,e,n){"use strict";n.d(e,{r:function(){return a},y:function(){return u}});var r=n(6866),o=n(3041),i=n(4552),u=function(t){if(!t)return new Error("A conversationId must be provided.")},a=function(t){var e=(0,i.rd)(),n={total:e.total,change:{conversationId:t,count:e.conversations[t]}};(0,o.M)(r.rr,n)}},4516:function(t,e,n){"use strict";n.d(e,{e:function(){return s}});var r=n(4552),o=n(3064);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(t,e,n){var i,u,c,s,l,f,d,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pubnub",p=null==n?void 0:n.find((function(t){return"user"===t.type})),b=null==p?void 0:p.attributes;if(b){var m=null==p?void 0:p.id;(0,r.dz)(m,b)}else{var y,g,h;b=(0,r.np)(null==t||null===(y=t.relationships)||void 0===y||null===(g=y.sentBy)||void 0===g||null===(h=g.data)||void 0===h?void 0:h.id)}var w,O=null==n?void 0:n.find((function(t){return"template"===t.type})),j=null==n||null===(i=n.filter((function(t){return"article"===t.type})))||void 0===i?void 0:i.map(o.$),S=t.id,P=t.attributes,A=t.relationships;null!=e&&e.length&&(w=e.map((function(t){return function(t){var e=t.links.related,n=t.id,r=t.attributes;return{url:e,attachmentId:n,contentLength:r.contentLength,contentType:r.contentType,name:r.name}}(t)})));var _=P.appGenerated,k=P.auto,I=P.body,E=P.bodyOverride,C=P.createdAt,M=P.direction,D=P.directionType,T=P.titleOverride,x=P.meta,N=A.session.data.id,F=null===(u=A.sentBy)||void 0===u||null===(c=u.data)||void 0===c?void 0:c.type,$=null===(s=A.sentBy)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.id,U=null===(f=b)||void 0===f?void 0:f.displayName,K=null===(d=b)||void 0===d?void 0:d.avatarUrl;return{appGenerated:_,messageId:S,body:I,createdAt:C,direction:M,directionType:D,conversationId:N,attachments:w,isInAssistantMode:Boolean(null==x?void 0:x.assistant),meta:{template:O&&a(a({},null==O?void 0:O.attributes),{},{id:null==O?void 0:O.id}),articles:j},notificationOverrides:{bodyOverride:E,titleOverride:T},sentBy:{type:k?"user":F,id:$,displayName:U,avatarUrl:K},source:v}}},4552:function(t,e,n){"use strict";n.d(e,{KA:function(){return f},NT:function(){return y},Y_:function(){return b},cO:function(){return v},cZ:function(){return w},dz:function(){return j},ez:function(){return P},fF:function(){return d},kk:function(){return m},kw:function(){return p},np:function(){return S},rd:function(){return O},yj:function(){return h}});var r=n(2838);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return(e=function(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={listeners:{},sessions:{},unreadCounts:{conversations:{},total:0},users:{}},l=s,f=function(){return l},d=function(t,e){l=a(a({},l),{},c({},t,e))},v=function(t,e){var n,r=l.listeners[t]||[];l=a(a({},l),{},{listeners:a(a({},l.listeners),{},c({},t,[].concat((n=r,function(t){if(Array.isArray(t))return i(t)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[e])))})},p=function(t,e){var n=l.listeners[t];null!=n&&n.length&&(l=a(a({},l),{},{listeners:a(a({},l.listeners),{},c({},t,n.filter((function(t){return t!==e}))))}))},b=function(t){l=a(a({},l),{},{sessions:a(a({},l.sessions),{},c({},t.id,t))})},m=function(t){var e;return null===(e=l.sessions)||void 0===e?void 0:e[t]},y=function(t){l=a(a({},l),{},{unreadCounts:t})},g=function(t,e,n){l=a(a({},l),{},{unreadCounts:{total:e,conversations:a(a({},l.unreadCounts.conversations),{},c({},t,n))}})},h=function(t){var e=l.unreadCounts.conversations[t],n=l.unreadCounts.total;g(t,n>0?n-e:0,0)},w=function(t){var e=l.unreadCounts.conversations[t]||0,n=l.unreadCounts.total||0;g(t,n+1,e+1)},O=function(){return l.unreadCounts},j=function(t,e){l=a(a({},l),{},{users:a(a({},l.users),{},c({},t,e))})},S=function(t){return l.users[t]},P=function(){d("customerId",void 0),d("externalId",void 0),d("email",void 0),d("verified",void 0),d("sessions",{}),d("users",{}),d("unreadCounts",s.unreadCounts),d("testAutomationId",void 0),d("enableUrlUnfurling",!1),r.eI.clear()}},4601:function(t,e,n){"use strict";n.d(e,{H:function(){return s},K:function(){return r}});var r,o=n(3429);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(t){t.CHAT_DISABLED="Kustomer Chat is disabled in your org settings. Initialization will not continue."}(r||(r={}));var s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.message,i=e.tags;if(console.error(n,t),t.message!==r.CHAT_DISABLED)return(0,o.Cp)(t,{tags:a({errorBoundary:!1},i)})}},5564:function(t,e,n){"use strict";n.d(e,{Oc:function(){return h},_s:function(){return w},wb:function(){return O},SQ:function(){return y}});var r=n(7162),o=n(3566);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function d(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}var p,b=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"events",[]),d(this,"runningTimers",new Map),setInterval((function(){n.pushData()}),3e3),this.orgName=e}var e,n;return e=t,n=[{key:"setOrgName",value:function(t){this.orgName=t}},{key:"pushData",value:function(){0!==this.events.length&&this.orgName&&(("kustomer"===this.orgName||this.orgName.startsWith("zzz-")||this.orgName.startsWith("mikerapin"))&&function(t,e){if(!e)return Promise.reject(new Error("Missing org"));var n=(0,r.IZ)(),i=n.protocol,u=n.baseUrlDomain,c={body:t,method:"POST"},s="".concat(i,"://").concat(e,".").concat(u).concat("/c/v1/chat-events"),l=function(t){var e=(0,o.Fb)()||"",n=new Headers({"Content-Type":"application/json","x-kustomer":"kustomer","x-kustomer-client":"chat-web","x-kustomer-tracking-token":e,credentials:"include"});return a(a({},t),{},{headers:n})}(c);fetch(s,l)}(JSON.stringify(this.events),this.orgName),this.events=[])}},{key:"createEvent",value:function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({surface:"web",timestamp:Date.now()},t)}},{key:"countEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e<1||this.events.push(this.createEvent({context:n,count:e,name:t}))}},{key:"timeEventStart",value:function(t){this.runningTimers.set(t,Date.now())}},{key:"timeEventStop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.runningTimers.has(t)||console.error("There is no timer event being tracked with name: ".concat(t));var n=this.runningTimers.get(t);this.events.push(this.createEvent({name:t,duration:Date.now()-n,context:e}))}}],n&&f(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),m=function(t){if(!t)return"";try{var e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(e).split("").map((function(t){return"%".concat("00".concat(t.charCodeAt(0).toString(16)).slice(-2))})).join(""));return JSON.parse(n)}catch(t){return""}},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=t.substring(1,t.indexOf("?")>-1?t.indexOf("?"):t.length).replaceAll(/[0-9a-z]{24}\/?/g,"").replaceAll("/","_").replaceAll(/[,|.]/g,"").replace(/_$/g,""),r=e.toLowerCase();return"api.".concat(r,".").concat(n,".timer")},g=function(t){return p||(p=new b(t)),!p.orgName&&t&&p.setOrgName(t),p},h=function(t){var e=t.name,n=t.count,r=void 0===n?1:n,o=t.context,i=t.apiKey,u=i?m(i).orgName:null;g(u).countEvent(e,r,o)},w=function(t){var e=t.name,n=t.apiKey,r=n?m(n).orgName:null;g(r).timeEventStart(e)},O=function(t){var e=t.name,n=t.context,r=t.apiKey,o=r?m(r).orgName:null;g(o).timeEventStop(e,n)}},3429:function(t,e,n){"use strict";function r(){return n.e("sentry").then(n.bind(n,2862))}function o(t,e){return r().then((function(n){return n.getClient()||n.init({dsn:"https://".concat(t,"@o38471.ingest.sentry.io/6150287"),environment:"production",release:"release-v0.1.428",initialScope:{tags:{orgId:e}},beforeSend:function(t){var e,n;return null!==(e=t.exception)&&void 0!==e&&null!==(n=e.values)&&void 0!==n&&n.length&&!t.exception.values[0].stacktrace?null:t},integrations:[n.httpClientIntegration({failedRequestStatusCodes:[400,599]})],ignoreErrors:["TypeError: Failed to fetch","TypeError: NetworkError when attempting to fetch resource.","TypeError: cancelled","TypeError: Abgebrochen","TypeError: Kumottu","TypeError: annullato","TypeError: annulleret","TypeError: avbrutt","TypeError: geannuleerd","TypeError: poniteno","TypeError: vazgeildi","TypeError: visszavonva","TypeError: ","TypeError: ","TypeError: ","TypeError: ","TypeError: "]}),n}))}function i(t,e){return r().then((function(n){return n.captureException(t,e)}))}n.d(e,{Cp:function(){return i},ig:function(){return o}})},3566:function(t,e,n){"use strict";n.d(e,{Fb:function(){return f},KI:function(){return l},NS:function(){return d},Vj:function(){return c},Vl:function(){return v},XL:function(){return b},d9:function(){return s},fC:function(){return p},hR:function(){return i},kl:function(){return a}});var r=n(1605),o=(n(190),n(420)),i=function(t,e){var n=document.querySelector("[data-kustomer-api-key]");n&&n.parentNode&&(n.parentNode.insertBefore(t,n),null==e||e())},u=!1,a=function(t){if(t&&!u){u=!0;var e=function(t){return!t||o.P.some((function(e){return"string"==typeof e&&t.startsWith(e)}))},n=Node.prototype.appendChild;Node.prototype.appendChild=function(r){if(r instanceof HTMLScriptElement&&!r.hasAttribute("nonce")){var o=r.getAttribute("src")||void 0;e(o)&&r.setAttribute("nonce",t)}return n.call(this,r)};var r=Node.prototype.insertBefore;Node.prototype.insertBefore=function(n,o){if(n instanceof HTMLScriptElement&&!n.hasAttribute("nonce")){var i=n.getAttribute("src")||void 0;e(i)&&n.setAttribute("nonce",t)}return r.call(this,n,o)};var i=document.head.appendChild;document.head.appendChild=function(n){if(n instanceof HTMLScriptElement&&!n.hasAttribute("nonce")){var r=n.getAttribute("src")||void 0;e(r)&&n.setAttribute("nonce",t)}return i.call(document.head,n)};var a=document.body.appendChild;document.body.appendChild=function(n){if(n instanceof HTMLScriptElement&&!n.hasAttribute("nonce")){var r=n.getAttribute("src")||void 0;e(r)&&n.setAttribute("nonce",t)}return a.call(document.body,n)};var c=document.body.append;document.body.append=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r.forEach((function(n){if(n instanceof HTMLScriptElement&&!n.hasAttribute("nonce")){var r=n.getAttribute("src")||void 0;e(r)&&n.setAttribute("nonce",t)}})),c.call.apply(c,[document.body].concat(r))};var s=document.head.append;if(document.head.append=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return r.forEach((function(n){if(n instanceof HTMLScriptElement&&!n.hasAttribute("nonce")){var r=n.getAttribute("src")||void 0;e(r)&&n.setAttribute("nonce",t)}})),s.call.apply(s,[document.head].concat(r))},window.__webpack_require__&&window.__webpack_require__.e){var l=window.__webpack_require__.e;window.__webpack_require__.e=function(n){return l.call(this,n).then((function(){setTimeout((function(){document.querySelectorAll('script[src*="'.concat(n,'"]')).forEach((function(n){if(!n.hasAttribute("nonce")){var r=n.getAttribute("src")||void 0;e(r)&&n.setAttribute("nonce",t)}}))}),0)}))}}}},c=function(t,e,n,o,u){var a=document.createElement("iframe");a.setAttribute("id",t),a.setAttribute("title",o),a.setAttribute("aria-label",o),a.setAttribute("role","application"),a.setAttribute("tabindex","0"),u&&a.setAttribute("nonce",u),a.style.cssText=e,i(a,(function(){(0,r.HE)(a,n)}))},s=function(){var t=window.frameElement,e="IFRAME"===(null==t?void 0:t.nodeName)?t:document.getElementById("kustomer-core-sdk-iframe");if("IFRAME"===(null==e?void 0:e.nodeName))return e},l=function(t){try{localStorage.setItem("kustomer-chat-tracking-token",t)}catch(t){throw new Error("Setting tracking token in local storage")}},f=function(){try{return localStorage.getItem("kustomer-chat-tracking-token")}catch(t){throw new Error("Getting tracking token from local storage")}},d=function(){try{return localStorage.removeItem("kustomer-chat-tracking-token")}catch(t){throw new Error("Removing tracking token from local storage")}},v=function(t){try{return localStorage.setItem("kustomer-initial-chat-polling-interval-ms",t)}catch(t){return console.warn("Error setting polling interval MS in local storage")}},p=function(){var t=window.navigator.userAgent.toLowerCase();return!!/iphone|ipod|ipad/.test(t)&&"standalone"in window.navigator&&window.navigator.standalone};function b(t){var e=null!=t?t:window;try{if(e.parent&&e.parent.location&&e.parent.location.href)return e.parent}catch(t){return}}},420:function(t,e,n){"use strict";n.d(e,{P:function(){return r},m:function(){return o}});var r=["https://cdn.kustomerapp.com","https://cdn.helpapp.io","http://localhost:9000"],o=function(t){var e=t||document.querySelector("[data-kustomer-api-key]");return(null==e?void 0:e.getAttribute("nonce"))||void 0};"undefined"!=typeof window&&(window.KustomerGetNonce=o)},3182:function(t,e,n){"use strict";n.d(e,{A0:function(){return c}});var r=n(1605),o=n(2997),i=n(9696),u=(n(7715),function(){var t,e=window.navigator;return(0,r.TJ)()?null==e?void 0:e.browserLanguage:null==e||null===(t=e.languages)||void 0===t?void 0:t[0]}),a=function(t){var e=t.toLowerCase(),n=e.replace("-","_");return-1===n.indexOf("_")?e:i.Y[n]?n:n.split("_")[0]},c=function(t){var e,n;if(t)return i.Y[t];var r=null===(e=(0,o.n2)())||void 0===e||null===(n=e.startParameters)||void 0===n?void 0:n.lang,c=r&&"string"==typeof r&&a(r);if(c&&i.Y[c])return i.Y[c];var s=a(u());return i.Y[s]}},9696:function(t,e,n){"use strict";n.d(e,{Y:function(){return r}});var r={af:"af",am:"am",ar:"ar",az:"az",be:"be",bg:"bg",bs:"bs",ca:"ca",cs:"cs",da:"da",de:"de",el:"el",en:"en_us",en_ca:"en_ca",en_gb:"en_gb",en_us:"en_us",es:"es",es_es:"es_es",et:"et",fi:"fi",fil:"fil",fr:"fr",fr_ca:"fr_ca",he:"he",hi:"hi",hr:"hr",hu:"hu",id:"id",is:"is",it:"it",ja:"ja",ka:"ka",kk:"kk",kn:"kn",ko:"ko",ky:"ky",lt:"lt",lv:"lv",ms:"ms",nl:"nl",no:"no",pa:"pa",pl:"pl",pt:"pt",pt_br:"pt_br",ro:"ro",ru:"ru",sk:"sk",sl:"sl",sq:"sq",sr:"sr",sv:"sv",sw:"sw",te:"te",th:"th",tr:"tr",tw:"zh_tw",uk:"uk",ur:"ur",uz:"uz",vi:"vi",zh:"zh_cn",zh_cn:"zh_cn",zh_tw:"zh_tw"}},7715:function(t,e,n){},1605:function(t,e,n){"use strict";n.d(e,{HE:function(){return u},TJ:function(){return o},sD:function(){return i}});var r=n(441),o=function(){var t=window.navigator.userAgent;return t.indexOf("MSIE")>0||t.indexOf("Trident")>0},i=function(){return o()?Promise.all([n.e("intl-relativetimeformat"),n.e("vendors-node_modules_formatjs_intl-getcanonicallocales_polyfill_js-node_modules_formatjs_intl-64af64"),n.e("polyfills")]).then(n.bind(n,676)).catch((function(t){return"An error occurred while loading polyfills, ".concat(t)})):Promise.resolve()},u=function(t,e){var n=t;o()&&(0,r.X)(n,e),n.srcdoc=e}},441:function(t,e,n){"use strict";n.d(e,{X:function(){return r}});var r=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t&&t.getAttribute&&(t.setAttribute("srcdoc",n),e="javascript: window.frameElement.getAttribute('srcdoc');",t.contentWindow&&(t.contentWindow.location=e),t.setAttribute("src",e))}},190:function(t,e,n){"use strict";var r=n(2277);r.FU,r.b$},2277:function(t,e,n){"use strict";n.d(e,{FU:function(){return r},b$:function(){return o}});var r="kb-article",o="kb-deflect-article"},2997:function(t,e,n){"use strict";n.d(e,{n2:function(){return r}});var r=function(){return window.parent.Kustomer}},4353:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",o="minute",i="hour",u="day",a="week",c="month",s="quarter",l="year",f="date",d="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},y={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,c),i=n-o<0,u=e.clone().add(r+(i?-1:1),c);return+(-(r+(n-o)/(i?o-u:u-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:l,w:a,d:u,D:f,h:i,m:o,s:r,ms:n,Q:s}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",h={};h[g]=b;var w=function(t){return t instanceof P},O=function(t,e,n){var r;if(!t)return g;if("string"==typeof t)h[t]&&(r=t),e&&(h[t]=e,r=t);else{var o=t.name;h[o]=t,r=o}return!n&&r&&(g=r),r||!n&&g},j=function(t,e){if(w(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new P(n)},S=y;S.l=O,S.i=w,S.w=function(t,e){return j(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var P=function(){function b(t){this.$L=O(t.locale,null,!0),this.parse(t)}var m=b.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(v);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return S},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(t,e){var n=j(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return j(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<j(t)},m.$g=function(t,e,n){return S.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,s=!!S.u(e)||e,d=S.p(t),v=function(t,e){var r=S.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return s?r:r.endOf(u)},p=function(t,e){return S.w(n.toDate()[t].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},b=this.$W,m=this.$M,y=this.$D,g="set"+(this.$u?"UTC":"");switch(d){case l:return s?v(1,0):v(31,11);case c:return s?v(1,m):v(0,m+1);case a:var h=this.$locale().weekStart||0,w=(b<h?b+7:b)-h;return v(s?y-w:y+(6-w),m);case u:case f:return p(g+"Hours",0);case i:return p(g+"Minutes",1);case o:return p(g+"Seconds",2);case r:return p(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var a,s=S.p(t),d="set"+(this.$u?"UTC":""),v=(a={},a[u]=d+"Date",a[f]=d+"Date",a[c]=d+"Month",a[l]=d+"FullYear",a[i]=d+"Hours",a[o]=d+"Minutes",a[r]=d+"Seconds",a[n]=d+"Milliseconds",a)[s],p=s===u?this.$D+(e-this.$W):e;if(s===c||s===l){var b=this.clone().set(f,1);b.$d[v](p),b.init(),this.$d=b.set(f,Math.min(this.$D,b.daysInMonth())).$d}else v&&this.$d[v](p);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[S.p(t)]()},m.add=function(n,s){var f,d=this;n=Number(n);var v=S.p(s),p=function(t){var e=j(d);return S.w(e.date(e.date()+Math.round(t*n)),d)};if(v===c)return this.set(c,this.$M+n);if(v===l)return this.set(l,this.$y+n);if(v===u)return p(1);if(v===a)return p(7);var b=(f={},f[o]=t,f[i]=e,f[r]=1e3,f)[v]||1,m=this.$d.getTime()+n*b;return S.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=S.z(this),i=this.$H,u=this.$m,a=this.$M,c=n.weekdays,s=n.months,l=function(t,n,o,i){return t&&(t[n]||t(e,r))||o[n].substr(0,i)},f=function(t){return S.s(i%12||12,t,"0")},v=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},b={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:S.s(a+1,2,"0"),MMM:l(n.monthsShort,a,s,3),MMMM:l(s,a),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,c,2),ddd:l(n.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(i),HH:S.s(i,2,"0"),h:f(1),hh:f(2),a:v(i,u,!0),A:v(i,u,!1),m:String(u),mm:S.s(u,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:o};return r.replace(p,(function(t,e){return e||b[t]||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,f,d){var v,p=S.p(f),b=j(n),m=(b.utcOffset()-this.utcOffset())*t,y=this-b,g=S.m(this,b);return g=(v={},v[l]=g/12,v[c]=g,v[s]=g/3,v[a]=(y-m)/6048e5,v[u]=(y-m)/864e5,v[i]=y/e,v[o]=y/t,v[r]=y/1e3,v)[p]||y,d?g:S.a(g)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return h[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=O(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return S.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},b}(),A=P.prototype;return j.prototype=A,[["$ms",n],["$s",r],["$m",o],["$H",i],["$W",u],["$M",c],["$y",l],["$D",f]].forEach((function(t){A[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),j.extend=function(t,e){return t.$i||(t(e,P,j),t.$i=!0),j},j.locale=O,j.isDayjs=w,j.unix=function(t){return j(1e3*t)},j.en=h[g],j.Ls=h,j.p={},j}()},6762:function(t,e,n){var r,o="__lodash_hash_undefined__",i=1/0,u="[object Function]",a="[object GeneratorFunction]",c="[object Symbol]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,f=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,p=/^\[object .+?Constructor\]$/,b="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,m="object"==typeof self&&self&&self.Object===Object&&self,y=b||m||Function("return this")(),g=Array.prototype,h=Function.prototype,w=Object.prototype,O=y["__core-js_shared__"],j=(r=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",S=h.toString,P=w.hasOwnProperty,A=w.toString,_=RegExp("^"+S.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=y.Symbol,I=g.splice,E=U(y,"Map"),C=U(Object,"create"),M=k?k.prototype:void 0,D=M?M.toString:void 0;function T(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function x(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function N(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function F(t,e){for(var n,r,o=t.length;o--;)if((n=t[o][0])===(r=e)||n!=n&&r!=r)return o;return-1}function $(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function U(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){if(!z(t)||j&&j in t)return!1;var e=function(t){var e=z(t)?A.call(t):"";return e==u||e==a}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?_:p;return e.test(function(t){if(null!=t){try{return S.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(n)?n:void 0}T.prototype.clear=function(){this.__data__=C?C(null):{}},T.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},T.prototype.get=function(t){var e=this.__data__;if(C){var n=e[t];return n===o?void 0:n}return P.call(e,t)?e[t]:void 0},T.prototype.has=function(t){var e=this.__data__;return C?void 0!==e[t]:P.call(e,t)},T.prototype.set=function(t,e){return this.__data__[t]=C&&void 0===e?o:e,this},x.prototype.clear=function(){this.__data__=[]},x.prototype.delete=function(t){var e=this.__data__,n=F(e,t);return!(n<0||(n==e.length-1?e.pop():I.call(e,n,1),0))},x.prototype.get=function(t){var e=this.__data__,n=F(e,t);return n<0?void 0:e[n][1]},x.prototype.has=function(t){return F(this.__data__,t)>-1},x.prototype.set=function(t,e){var n=this.__data__,r=F(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},N.prototype.clear=function(){this.__data__={hash:new T,map:new(E||x),string:new T}},N.prototype.delete=function(t){return $(this,t).delete(t)},N.prototype.get=function(t){return $(this,t).get(t)},N.prototype.has=function(t){return $(this,t).has(t)},N.prototype.set=function(t,e){return $(this,t).set(t,e),this};var K=L((function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(R(t))return D?D.call(t):"";var e=t+"";return"0"==e&&1/t==-i?"-0":e}(e);var n=[];return f.test(t)&&n.push(""),t.replace(d,(function(t,e,r,o){n.push(r?o.replace(v,"$1"):e||t)})),n}));function B(t){if("string"==typeof t||R(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}function L(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new(L.Cache||N),n}L.Cache=N;var H=Array.isArray;function z(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function R(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&A.call(t)==c}t.exports=function(t,e,n){var r=null==t?void 0:function(t,e){var n;e=function(t,e){if(H(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!R(t))||l.test(t)||!s.test(t)||null!=e&&t in Object(e)}(e,t)?[e]:H(n=e)?n:K(n);for(var r=0,o=e.length;null!=t&&r<o;)t=t[B(e[r++])];return r&&r==o?t:void 0}(t,e);return void 0===r?n:r}},462:function(t,e,n){"use strict";var r=n(975);t.exports=r},9748:function(t,e,n){"use strict";n(1340);var r=n(2046);t.exports=r.Object.assign},5401:function(t,e,n){"use strict";var r=n(462);t.exports=r},2159:function(t,e,n){"use strict";var r=n(2250),o=n(4640),i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not a function")}},6624:function(t,e,n){"use strict";var r=n(6285),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not an object")}},4436:function(t,e,n){"use strict";var r=n(7374),o=n(4849),i=n(575),u=function(t){return function(e,n,u){var a=r(e),c=i(a);if(0===c)return!t&&-1;var s,l=o(u,c);if(t&&n!=n){for(;c>l;)if((s=a[l++])!=s)return!0}else for(;c>l;l++)if((t||l in a)&&a[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:u(!0),indexOf:u(!1)}},5807:function(t,e,n){"use strict";var r=n(1907),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},1626:function(t,e,n){"use strict";var r=n(9447),o=n(4284),i=n(5817);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},5817:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2532:function(t,e,n){"use strict";var r=n(5951),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},9447:function(t,e,n){"use strict";var r=n(8828);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},9552:function(t,e,n){"use strict";var r=n(5951),o=n(6285),i=r.document,u=o(i)&&o(i.createElement);t.exports=function(t){return u?i.createElement(t):{}}},376:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6794:function(t,e,n){"use strict";var r=n(5951).navigator,o=r&&r.userAgent;t.exports=o?String(o):""},798:function(t,e,n){"use strict";var r,o,i=n(5951),u=n(6794),a=i.process,c=i.Deno,s=a&&a.versions||c&&c.version,l=s&&s.v8;l&&(o=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&u&&(!(r=u.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=u.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},1091:function(t,e,n){"use strict";var r=n(5951),o=n(6024),i=n(2361),u=n(2250),a=n(3846).f,c=n(7463),s=n(2046),l=n(8311),f=n(1626),d=n(9724);n(6128);var v=function(t){var e=function(n,r,i){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,i)}return o(t,this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var n,o,p,b,m,y,g,h,w,O=t.target,j=t.global,S=t.stat,P=t.proto,A=j?r:S?r[O]:r[O]&&r[O].prototype,_=j?s:s[O]||f(s,O,{})[O],k=_.prototype;for(b in e)o=!(n=c(j?b:O+(S?".":"#")+b,t.forced))&&A&&d(A,b),y=_[b],o&&(g=t.dontCallGetSet?(w=a(A,b))&&w.value:A[b]),m=o&&g?g:e[b],(n||P||typeof y!=typeof m)&&(h=t.bind&&o?l(m,r):t.wrap&&o?v(m):P&&u(m)?i(m):m,(t.sham||m&&m.sham||y&&y.sham)&&f(h,"sham",!0),f(_,b,h),P&&(d(s,p=O+"Prototype")||f(s,p,{}),f(s[p],b,m),t.real&&k&&(n||!k[b])&&f(k,b,m)))}},8828:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},6024:function(t,e,n){"use strict";var r=n(1505),o=Function.prototype,i=o.apply,u=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?u.bind(i):function(){return u.apply(i,arguments)})},8311:function(t,e,n){"use strict";var r=n(2361),o=n(2159),i=n(1505),u=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?u(t,e):function(){return t.apply(e,arguments)}}},1505:function(t,e,n){"use strict";var r=n(8828);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},3930:function(t,e,n){"use strict";var r=n(1505),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},2361:function(t,e,n){"use strict";var r=n(5807),o=n(1907);t.exports=function(t){if("Function"===r(t))return o(t)}},1907:function(t,e,n){"use strict";var r=n(1505),o=Function.prototype,i=o.call,u=r&&o.bind.bind(i,i);t.exports=r?u:function(t){return function(){return i.apply(t,arguments)}}},5582:function(t,e,n){"use strict";var r=n(2046),o=n(5951),i=n(2250),u=function(t){return i(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?u(r[t])||u(o[t]):r[t]&&r[t][e]||o[t]&&o[t][e]}},9367:function(t,e,n){"use strict";var r=n(2159),o=n(7136);t.exports=function(t,e){var n=t[e];return o(n)?void 0:r(n)}},5951:function(t,e,n){"use strict";var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9724:function(t,e,n){"use strict";var r=n(1907),o=n(9298),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},8530:function(t){"use strict";t.exports={}},3648:function(t,e,n){"use strict";var r=n(9447),o=n(8828),i=n(9552);t.exports=!r&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},6946:function(t,e,n){"use strict";var r=n(1907),o=n(8828),i=n(5807),u=Object,a=r("".split);t.exports=o((function(){return!u("z").propertyIsEnumerable(0)}))?function(t){return"String"===i(t)?a(t,""):u(t)}:u},2250:function(t){"use strict";var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},7463:function(t,e,n){"use strict";var r=n(8828),o=n(2250),i=/#|\.prototype\./,u=function(t,e){var n=c[a(t)];return n===l||n!==s&&(o(e)?r(e):!!e)},a=u.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=u.data={},s=u.NATIVE="N",l=u.POLYFILL="P";t.exports=u},7136:function(t){"use strict";t.exports=function(t){return null==t}},6285:function(t,e,n){"use strict";var r=n(2250);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},7376:function(t){"use strict";t.exports=!0},5594:function(t,e,n){"use strict";var r=n(5582),o=n(2250),i=n(8280),u=n(1175),a=Object;t.exports=u?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return o(e)&&i(e.prototype,a(t))}},575:function(t,e,n){"use strict";var r=n(3121);t.exports=function(t){return r(t.length)}},1176:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},9538:function(t,e,n){"use strict";var r=n(9447),o=n(1907),i=n(3930),u=n(8828),a=n(2875),c=n(7170),s=n(2574),l=n(9298),f=n(6946),d=Object.assign,v=Object.defineProperty,p=o([].concat);t.exports=!d||u((function(){if(r&&1!==d({b:1},d(v({},"a",{enumerable:!0,get:function(){v(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach((function(t){e[t]=t})),7!==d({},t)[n]||a(d({},e)).join("")!==o}))?function(t,e){for(var n=l(t),o=arguments.length,u=1,d=c.f,v=s.f;o>u;)for(var b,m=f(arguments[u++]),y=d?p(a(m),d(m)):a(m),g=y.length,h=0;g>h;)b=y[h++],r&&!i(v,m,b)||(n[b]=m[b]);return n}:d},4284:function(t,e,n){"use strict";var r=n(9447),o=n(3648),i=n(8661),u=n(6624),a=n(470),c=TypeError,s=Object.defineProperty,l=Object.getOwnPropertyDescriptor,f="enumerable",d="configurable",v="writable";e.f=r?i?function(t,e,n){if(u(t),e=a(e),u(n),"function"==typeof t&&"prototype"===e&&"value"in n&&v in n&&!n[v]){var r=l(t,e);r&&r[v]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:f in n?n[f]:r[f],writable:!1})}return s(t,e,n)}:s:function(t,e,n){if(u(t),e=a(e),u(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},3846:function(t,e,n){"use strict";var r=n(9447),o=n(3930),i=n(2574),u=n(5817),a=n(7374),c=n(470),s=n(9724),l=n(3648),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=a(t),e=c(e),l)try{return f(t,e)}catch(t){}if(s(t,e))return u(!o(i.f,t,e),t[e])}},7170:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},8280:function(t,e,n){"use strict";var r=n(1907);t.exports=r({}.isPrototypeOf)},3045:function(t,e,n){"use strict";var r=n(1907),o=n(9724),i=n(7374),u=n(4436).indexOf,a=n(8530),c=r([].push);t.exports=function(t,e){var n,r=i(t),s=0,l=[];for(n in r)!o(a,n)&&o(r,n)&&c(l,n);for(;e.length>s;)o(r,n=e[s++])&&(~u(l,n)||c(l,n));return l}},2875:function(t,e,n){"use strict";var r=n(3045),o=n(376);t.exports=Object.keys||function(t){return r(t,o)}},2574:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},581:function(t,e,n){"use strict";var r=n(3930),o=n(2250),i=n(6285),u=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&o(n=t.toString)&&!i(a=r(n,t)))return a;if(o(n=t.valueOf)&&!i(a=r(n,t)))return a;if("string"!==e&&o(n=t.toString)&&!i(a=r(n,t)))return a;throw new u("Can't convert object to primitive value")}},2046:function(t){"use strict";t.exports={}},4239:function(t,e,n){"use strict";var r=n(7136),o=TypeError;t.exports=function(t){if(r(t))throw new o("Can't call method on "+t);return t}},6128:function(t,e,n){"use strict";var r=n(7376),o=n(5951),i=n(2532),u="__core-js_shared__",a=t.exports=o[u]||i(u,{});(a.versions||(a.versions=[])).push({version:"3.45.1",mode:r?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5816:function(t,e,n){"use strict";var r=n(6128);t.exports=function(t,e){return r[t]||(r[t]=e||{})}},9846:function(t,e,n){"use strict";var r=n(798),o=n(8828),i=n(5951).String;t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4849:function(t,e,n){"use strict";var r=n(5482),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},7374:function(t,e,n){"use strict";var r=n(6946),o=n(4239);t.exports=function(t){return r(o(t))}},5482:function(t,e,n){"use strict";var r=n(1176);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},3121:function(t,e,n){"use strict";var r=n(5482),o=Math.min;t.exports=function(t){var e=r(t);return e>0?o(e,9007199254740991):0}},9298:function(t,e,n){"use strict";var r=n(4239),o=Object;t.exports=function(t){return o(r(t))}},6028:function(t,e,n){"use strict";var r=n(3930),o=n(6285),i=n(5594),u=n(9367),a=n(581),c=n(6264),s=TypeError,l=c("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var n,c=u(t,l);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!o(n)||i(n))return n;throw new s("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},470:function(t,e,n){"use strict";var r=n(6028),o=n(5594);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},4640:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6499:function(t,e,n){"use strict";var r=n(1907),o=0,i=Math.random(),u=r(1.1.toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+u(++o+i,36)}},1175:function(t,e,n){"use strict";var r=n(9846);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8661:function(t,e,n){"use strict";var r=n(9447),o=n(8828);t.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},6264:function(t,e,n){"use strict";var r=n(5951),o=n(5816),i=n(9724),u=n(6499),a=n(9846),c=n(1175),s=r.Symbol,l=o("wks"),f=c?s.for||s:s&&s.withoutSetter||u;t.exports=function(t){return i(l,t)||(l[t]=a&&i(s,t)?s[t]:f("Symbol."+t)),l[t]}},1340:function(t,e,n){"use strict";var r=n(1091),o=n(9538);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},975:function(t,e,n){"use strict";var r=n(9748);t.exports=r}},i={};function u(t){var e=i[t];if(void 0!==e)return e.exports;var n=i[t]={exports:{}};return o[t].call(n.exports,n,n.exports,u),n.exports}u.m=o,u.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(e,{a:e}),e},e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},u.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);u.r(o);var i={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&n;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((function(t){i[t]=function(){return n[t]}}));return i.default=function(){return n},u.d(o,i),o},u.d=function(t,e){for(var n in e)u.o(e,n)&&!u.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},u.f={},u.e=function(t){return Promise.all(Object.keys(u.f).reduce((function(e,n){return u.f[n](t,e),e}),[]))},u.u=function(t){return t+"."+{"intl-relativetimeformat":"67f935f6643dd7681954","vendors-node_modules_formatjs_intl-getcanonicallocales_polyfill_js-node_modules_formatjs_intl-64af64":"44e6f2b71650cc2a2461",polyfills:"54c6462c8ebb5c0a42fd",sentry:"0464547f5ec91ecdb455",locale_en:"0d3e1e615c873506bf58",lang_es:"2cc757bdd59606ccb4f4",locale_es:"c57261f66f8244a0a3bc",lang_fr:"76bd17ec24042472267d",locale_fr:"68f15e3bfbb80f5200e9",lang_de:"b97126ad3a8b3c22c604",locale_de:"03f0a824ca6931c15528",lang_pt:"549351a6dc2568754230",locale_pt:"f8fa11b6a2c657f43152",lang_ar:"5049e2ce32e9710c576a",locale_ar:"7f9eef122046800007d4",lang_az:"43673ff18da0d28d7c7f",locale_az:"999d473e83a8fb5fea3a",lang_he:"a95ee6e2e2adc87adb1b",locale_he:"ebc014ae89195619ac0c",lang_af:"ccc8410776b8f12d0bd7",loclae_af:"d1e3f8f9ed36702f1548",lang_am:"4c240b33fb12339b2270",locale_am:"e487a1e3016ce8b56fb6",lang_be:"994277d8ae4c966597b6",locale_be:"70e03dcc18e5aa34b1d8",lang_bg:"a8a2ab8063e111c468c3",locale_bg:"3161102ec9b7170241f8",lang_bs:"dbb91d36f8e0dde6efbf",locale_bs:"2509bab8a874677b2a49",lang_ca:"69a93a8d8a747b5709fa",locale_ca:"ce78926b74524d6ebcf0",lang_cs:"1f6a230f3c4906aafaf9",locale_cs:"a45eccc3845e08d8e750",lang_da:"0941da25a120766e469b",locale_da:"20392eb427281fa08efa",lang_nl:"0a9ef6f6faaff75b89a9",locale_nl:"77d362feda67bb6ac76d",lang_el:"eed77f587a64fad9b3c6",locale_el:"64940041883b730c22b5",lang_et:"330d5b2b4cf4e50f36bb",locale_et:"506df51aaa4b520de0a3",lang_fi:"44a2f4a3c7355eed2937",locale_fi:"26f0cd103f1172f021ce",lang_fil:"2a247dd51e918868f78c",locale_fil:"8d3e43d60d0b5fad8369",lang_hi:"1bc43a8a6dc5b1eaf254",locale_hi:"2a4f05a231f85657ab55",lang_hr:"0c16c4bcc7ea5a55fce1",locale_hr:"e23fa4460f899e7e8f23",lang_hu:"35e2900c3d63017020bf",locale_hu:"9c8b03ef0c602c134dfd",lang_id:"b205615cb7df0e261e60",locale_id:"1d9cc4cf5afbc41c8420",lang_is:"a5b05ffcaf71479e28ab",locale_is:"f5f909dcd054d3b9aaea",lang_it:"1a3d398ba2db7621ad10",locale_it:"18c427cda56f0fd838d9",lang_ja:"5c857fcb463e1f80b094",locale_ja:"c3f95b6bd8fc2e0acee8",lang_ka:"40f0ac26081f99624b24",locale_ka:"e358b7309752122d04d6",lang_kk:"0fa018b347e8a16ca48c",locale_kk:"ab6f0e928f680d87129c",lang_kn:"6bd592884f2ff1241260",locale_kn:"5657b2620effbc912e69",lang_ko:"300a6e2e79c1b57894c1",locale_ko:"2eab1fb8470006f78716",lang_ky:"20c959800fab69555035",locale_ky:"2f52d2e187d44e1b1cac",lang_lt:"b223ee8ffe61778ca25a",locale_lt:"51a53ad301ea28e35514",lang_lv:"7b9f90c64f55989e59ef",locale_lv:"7e8afa694caf44845962",lang_ms:"965ba30507a11674ab24",locale_ms:"3535d382ebd184bdff80",lang_no:"f1f711659fcddf80d426",lang_pa:"f6142f2c446f18373546",locale_pa:"59895df9c5bfe359ccaf",lang_pl:"d745c00e044e4fb1ceef",locale_pl:"cb9e9706ee282fb57003",lang_pt_br:"4739fc8101c788776c56",lang_ro:"f916a7927bf66a1ef830",locale_ro:"668157511fb3271f93e3",lang_ru:"9ea32c0bacb9f801e3c7",locale_ru:"4f9ec23dc0c129a8fd1d",lang_sk:"3e1abdb9c5813fe6aebd",locale_sk:"d6d46112477f1d312ccd",lang_sl:"5a2f02421b0f0da7c8ec",locale_sl:"27e56c683f6d1d768ee4",lang_sq:"40d1ec9daf9fd70ee163",locale_sq:"47904077fcec9b6d99dd",lang_sr:"0d635d3d0236498232cd",locale_sr:"6a5b1b9880dc0fdd5963",lang_sv:"d2077dfadf83ba1ea51f",locale_sv:"de861debb6adaf0b6757",lang_sw:"0e7fe8f332d3a2e36996",locale_sw:"15008b7dc825f0967ca7",lang_te:"735a507f13aaaa3bc1cb",locale_te:"c5818095f0621198465e",lang_th:"9a682e4f38c0c06bf856",locale_th:"f11679ec63b1eb6a3b76",lang_tr:"d119f17d75e2c114bb8f",locale_tr:"9818212226ae217fe57f",lang_tw:"16e039a7fc6fcc9f0fe0",locale_ak:"963b6c22084b28390a44",lang_uk:"713a72a90a75afe8b6d9",locale_uk:"cd754a6b5dd3d203cede",lang_ur:"a54c99f6526f428cde98",locale_ur:"f163adacdb847a32acf0",lang_uz:"ad87d0e727bfe602be4f",locale_uz:"13abca0a0cdcf4cd1f95",lang_vi:"a62a9dad5d9c81b8d5b4",locale_vi:"47d917513b2ba51ec675",lang_zh_cn:"790de6da2485af4af125","vendors-node_modules_pubnub_dist_web_pubnub_min_js":"533ef2662a4c60ed20ea",pubnub:"41635698a65b247155b2"}[t]+".js"},u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n={},r="chat-web:",u.l=function(t,e,o,i){if(n[t])n[t].push(e);else{var a,c;if(void 0!==o)for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var f=s[l];if(f.getAttribute("src")==t||f.getAttribute("data-webpack")==r+o){a=f;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,u.nc&&a.setAttribute("nonce",u.nc),a.setAttribute("data-webpack",r+o),a.src=t),n[t]=[e];var d=function(e,r){a.onerror=a.onload=null,clearTimeout(v);var o=n[t];if(delete n[t],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(t){return t(r)})),e)return e(r)},v=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.p="https://cdn.kustomerapp.com/chat-web/release-v0.1.428/",function(){var t={"core-main":0};u.f.j=function(e,n){var r=u.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(n,o){r=t[e]=[n,o]}));n.push(r[2]=o);var i=u.p+u.u(e),a=new Error;u.l(i,(function(n){if(u.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,r[1](a)}}),"chunk-"+e,e)}};var e=function(e,n){var r,o,i=n[0],a=n[1],c=n[2],s=0;if(i.some((function(e){return 0!==t[e]}))){for(r in a)u.o(a,r)&&(u.m[r]=a[r]);c&&c(u)}for(e&&e(n);s<i.length;s++)o=i[s],u.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=self.webpackChunkchat_web=self.webpackChunkchat_web||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}(),function(){"use strict";var t=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))},e=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function i(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var u=n.then;if("function"==typeof u)return void u.call(n,(function(e){i(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--o&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--o&&e(r)}for(var u=0;u<r.length;u++)i(u,r[u])}))},n=setTimeout,r="undefined"!=typeof setImmediate?setImmediate:null;function o(t){return Boolean(t&&void 0!==t.length)}function i(){}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],v(t,this)}function c(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void l(e.promise,t)}s(e.promise,r)}else(1===t._state?s:l)(e.promise,t._value)}))):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void f(t);if("function"==typeof n)return void v((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){l(t,e)}var r,o}function l(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&a._immediateFn((function(){t._handled||a._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)c(t,t._deferreds[e]);t._deferreds=null}function d(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function v(t,e){var n=!1;try{t((function(t){n||(n=!0,s(e,t))}),(function(t){n||(n=!0,l(e,t))}))}catch(t){if(n)return;n=!0,l(e,t)}}a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(i);return c(this,new d(t,e,n)),n},a.prototype.finally=t,a.all=function(t){return new a((function(e,n){if(!o(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function u(t,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(e){u(t,e)}),n)}r[t]=o,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)u(a,r[a])}))},a.allSettled=e,a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a((function(e){e(t)}))},a.reject=function(t){return new a((function(e,n){n(t)}))},a.race=function(t){return new a((function(e,n){if(!o(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)a.resolve(t[r]).then(e,n)}))},a._immediateFn="function"==typeof r&&function(t){r(t)}||function(t){n(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=a,b=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==u.g)return u.g;throw new Error("unable to locate global object")}();"function"!=typeof b.Promise?b.Promise=p:(b.Promise.prototype.finally||(b.Promise.prototype.finally=t),b.Promise.allSettled||(b.Promise.allSettled=e))}(),function(){if("undefined"!=typeof window)try{var t=new window.CustomEvent("test",{cancelable:!0});if(t.preventDefault(),!0!==t.defaultPrevented)throw new Error("Could not prevent default")}catch(t){var e=function(t,e){var n,r;return(e=e||{}).bubbles=!!e.bubbles,e.cancelable=!!e.cancelable,(n=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r=n.preventDefault,n.preventDefault=function(){r.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},n};e.prototype=window.Event.prototype,window.CustomEvent=e}}(),function(){"use strict";var t=u(1605),e=u(9591),n=u(4552),r=u(3182),o=function(t){return(o=t.brandId,(0,e.Jt)(function(t){var e=null==t?void 0:t.brandId,n="/p/v1/chat/settings/versions/latest";return e&&(n="/p/v1/chat/brands/".concat(e,"/settings/versions/latest")),n}({brandId:o})).then((function(t){return null==t?void 0:t.data.attributes.settingsVersion})).catch((function(){}))).then((function(o){return(0,e.Jt)(function(t){var e=null==t?void 0:t.brandId,n=null==t?void 0:t.lang,o=null==t?void 0:t.settingsVersion,i="/p/v2/chat/settings";e&&(i="/p/v2/chat/brands/".concat(e,"/settings"));var u=(0,r.A0)(n),a=new URLSearchParams;n&&a.set("lang",u),void 0!==o&&a.set("settingsVersion",o.toString());var c=a.toString();return c.length&&(i="".concat(i,"?").concat(c)),i}({brandId:t.brandId,lang:t.lang,settingsVersion:o})).then((function(e){var r,o,i,u,a,c,s,l,f,d,v=e.data.attributes,p=v.assistantRules,b=v.botConsent,m=v.closableChat,y=v.colors,g=v.disableAttachments,h=v.domainCriteria,w=v.embedIconColor,O=v.embedIconUrl,j=v.enabled,S=v.greeting,P=v.noHistory,A=v.offhoursDisplay,_=v.offhoursImageUrl,k=v.offhoursMessage,I=v.outboundChatEnabled,E=v.sentry,C=v.sharedPubNubKeySet,M=v.showBotIdentifier,D=v.showBrandingIdentifier,T=v.showTypingIndicatorCustomerWeb,x=v.showTypingIndicatorWeb,N=v.singleSessionChat,F=v.teamIconUrl,$=v.teamName,U=v.volumeControl,K=v.waitMessage,B=v.widgetType,L=e.data.relationships.org.data.id,H=null==e||null===(r=e.data)||void 0===r||null===(o=r.relationships)||void 0===o||null===(i=o.brand)||void 0===i||null===(u=i.data)||void 0===u?void 0:u.id,z=null==e||null===(a=e.data)||void 0===a||null===(c=a.relationships)||void 0===c||null===(s=c.kb)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.id,R=(null==t?void 0:t.assistantId)||(null==e||null===(f=e.data)||void 0===f||null===(d=f.attributes)||void 0===d?void 0:d.activeAssistant);return(0,n.fF)("settings",{activeAssistant:R,assistantRules:p,botConsent:b,brandId:H,closableChat:m,colors:y,disableAttachments:g,domainCriteria:h,embedIconColor:w,embedIconUrl:O,enabled:j,greeting:S,knowledgeBaseId:z,noHistory:P,offhoursDisplay:A,offhoursImageUrl:_,offhoursMessage:k,outboundChatEnabled:I,sentry:E,sharedPubNubKeySet:C,showBotIdentifier:M,showBrandingIdentifier:D,showTypingIndicatorCustomerWeb:T,showTypingIndicatorWeb:x,singleSessionChat:N,teamIconUrl:F,teamName:$,volumeControl:U,waitMessage:K,widgetType:B}),(0,n.fF)("orgId",L),e}))}));var o},i=u(3566),a=u(9238),c=u(7556),s=u(2805),l=u(4601),f=u(3429),d=function(){var t=(0,n.KA)().settings,e=t.embedIconUrl,r=t.embedIconColor,o=t.teamIconUrl,i=t.teamName,u=t.waitMessage,a=t.greeting,c=t.singleSessionChat,s=t.noHistory,l=t.disableAttachments,f=t.offhoursDisplay,d=t.offhoursImageUrl,v=t.offhoursMessage,p=t.closableChat,b=t.widgetType,m=t.activeAssistant,y=t.volumeControl,g=t.domainCriteria,h=t.colors,w=t.showBrandingIdentifier,O=t.brandId,j=t.knowledgeBaseId,S=t.assistantRules,P=t.sentry,A=t.botConsent,_=t.showBotIdentifier;return{settings:{embedIconUrl:e,embedIconColor:r,teamName:i,teamIconUrl:o,waitMessage:y.customWaitMessage||u,greeting:a,singleSessionChat:c,noHistory:s,disableAttachments:l,offhoursDisplay:f,offhoursImageUrl:d,offhoursMessage:v,closableChat:p,widgetType:b,activeAssistant:m,volumeControl:y,domainCriteria:g,colors:h,showBrandingIdentifier:w,brandId:O,knowledgeBaseId:j,assistantRules:S,sentry:P,botConsent:A,showBotIdentifier:_}}},v=function(t,r){var u,v,p,b,m,y,g=(0,i.Fb)();return(0,n.fF)("testAutomationId",null==t?void 0:t.testAutomationId),(0,n.fF)("useLegacyConversationPreview",null!==(u=null==t?void 0:t.useLegacyConversationPreview)&&void 0!==u&&u),(0,n.fF)("enableUrlUnfurling",null===(v=null==t?void 0:t.enableUrlUnfurling)||void 0===v||v),Promise.all([o({brandId:null==t?void 0:t.brandId,lang:null==t?void 0:t.lang,assistantId:null==t?void 0:t.assistantId}),(p=null==t?void 0:t.scheduleId,y=p||(null===(b=(0,n.KA)())||void 0===b||null===(m=b.schedule)||void 0===m?void 0:m.id),(0,e.Jt)(function(t){return a.B.replace(":scheduleId",t||"default")}(y)).then((function(t){var e=t.included,r=t.data,o=r.id,i=r.attributes,u=i.hours,a=i.name,c=i.timezone,s=i.timezoneOffset;return(0,n.fF)("schedule",{id:o,hours:u,name:a,timezone:c,timezoneOffset:s,holidays:e}),t})))]).then((function(t){var e,o,u,a,v=null===(e=t[0])||void 0===e||null===(o=e.data)||void 0===o||null===(u=o.attributes)||void 0===u||null===(a=u.sentry)||void 0===a?void 0:a.web;if(v&&!(0,i.fC)()&&(0,f.ig)(v,(0,n.KA)().orgId),!(0,n.KA)().settings.enabled){var p=l.K.CHAT_DISABLED;return console.warn(p),Promise.reject(new Error(p))}if(null!==g)return(0,c.u)().then((function(t){var e,o,i,u,a=null==t||null===(e=t.data)||void 0===e||null===(o=e.relationships)||void 0===o||null===(i=o.customer)||void 0===i||null===(u=i.data)||void 0===u?void 0:u.id;if((0,n.fF)("customerId",a),void 0!==a){var c=(0,n.KA)().orgId,l=d();return(0,s.Z)({customerId:a,orgId:c,cb:function(){"function"==typeof r&&r(l)}}).then((function(){return l}))}(0,n.fF)("isPubNubConnected",!1)}));(0,n.fF)("isPubNubConnected",!1)})).then((function(t){if(!t&&"function"==typeof r){var e=d();r(e)}})).catch((function(t){"function"==typeof r&&r(null,t),(0,l.H)(t,{message:"Failed to initialize"})}))},p=u(6649),b=u(6866),m=u(3041),y=u(4619),g=function(t,e){var n=t.conversationChannels;return function(t){var r=t.operation,o=t.affectedChannels,i=t.error,u=t.category;r===y.us&&(n.filter((function(t){return null==o?void 0:o.includes(t)})).length===n.length||i)&&e(null,i?u:null)}};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e,n){return(e=function(t){var e=function(t){if("object"!=h(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S={fetchTrackingToken:c.a,httpPost:e.bE,endpoint:"/c/v2.1/chat/handoff"};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}var A=function(t,e){if(!t||"object"!==P(t))return new Error("Message at index ".concat(e," must be an object"));var n=t.date,r=t.direction,o=t.body;if(!n||"string"!=typeof n)return new Error("Message at index ".concat(e,": 'date' must be a non-empty string"));var i=new Date(n);if(Number.isNaN(i.getTime()))return new Error("Message at index ".concat(e,": 'date' must be a valid ISO 8601 date string"));if("in"!==r&&"out"!==r)return new Error("Message at index ".concat(e,": 'direction' must be either 'in' or 'out'"));if("string"!=typeof o)return new Error("Message at index ".concat(e,": 'body' must be a string"));var u=o.trim();return""===u?new Error("Message at index ".concat(e,": 'body' cannot be empty or whitespace only")):u.length>10240?new Error("Message at index ".concat(e,": 'body' must be ").concat(10240," characters or less (found ").concat(u.length,")")):void 0},_={fetchTrackingToken:c.u,updateStore:n.fF,handleError:l.H},k=u(6127),I=u(4516);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return(e=function(t){var e=function(t){if("object"!=E(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var T=function(t){if(t)return Object.entries(t).reduce((function(t,e){var n,r=e[0],o=e[1],i={};t&&(i=t);var u=null==o||null===(n=o.match(/(page=)([0-9]+)/g))||void 0===n?void 0:n[0];if("string"==typeof u){var a,c=null===(a=u.split("="))||void 0===a?void 0:a[1];u=Number.parseInt(c,10)}return i?("prev"===r?i.previous=u:"self"===r?i.current=u:i[r]=u,i):t}),{})};function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function F(t,e,n){return(e=function(t){var e=function(t){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $=(u(2327),u(5506)),U=u(1127);function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function z(t,e,n){return(e=function(t){var e=function(t){if("object"!=K(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==K(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function J(t){return function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return q(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){Y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Y(t,e,n){return(e=function(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var V=function(t){var e=null==t?void 0:t.messages.map((function(t){return new Promise((function(e){var n,r,o;(null==t||null===(n=t.message)||void 0===n||null===(r=n.data)||void 0===r||null===(o=r.relationships)||void 0===o?void 0:o.attachments)?(0,k.ML)(t.message.data.id).then((function(n){e(Z(Z({},t),{},{attachments:n}))})):e(t)}))}));return Promise.allSettled(e).then((function(t){var e=[];return t.forEach((function(t){"rejected"!==t.status?e.push(t.value):(0,l.H)(t.reason,{message:"Error appending attachment(s) to PubNub message"})})),{messages:e}}))};function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){tt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tt(t,e,n){return(e=function(t){var e=function(t){if("object"!=G(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==G(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var et=function(t){var e,n=null==t||null===(e=t.data)||void 0===e?void 0:e.map((function(t){return new Promise((function(e){var n;(null==t||null===(n=t.relationships)||void 0===n?void 0:n.attachments)?(0,k.ML)(t.id).then((function(n){e({message:t,attachments:n})})):e({message:t})}))}));return Promise.allSettled(n).then((function(e){var n=[];return e.forEach((function(t){"rejected"!==t.status?n.push(t.value):(0,l.H)(t.reason,{message:"Error appending attachment(s) to historical message"})})),{messages:n,links:null==t?void 0:t.links}}))},nt=u(3415),rt=u(4353),ot=u.n(rt),it=u(6762),ut=u.n(it);function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}var ct={s:"second",h:"hour",d:"day",w:"week",m:"minute",M:"month"};function st(t,e){var n=t.replace(/_/g,".");return ut()(e,n)}function lt(t){return null!=t&&("string"==typeof t?""!==t.trim():!Array.isArray(t)||0!==t.length)}function ft(t,e){var n;if(Array.isArray(t)&&!Array.isArray(e))return t.includes(e);try{switch(at(t)){case"string":n=String(e);break;case"number":n=Number(e);break;case"boolean":n="boolean"==typeof e?e:"true"===e;break;default:n=e}}catch(t){n=e}return t==n}function dt(t,e){if((0,nt.Kg)(t)&&(0,nt.Kg)(e)){var n=(t||"").toLocaleLowerCase(),r=(e||"").toLocaleLowerCase();return n.includes(r)}return!!(t||[]).filter((function(t){return(t||"").toLocaleLowerCase().includes((e||"").toLocaleLowerCase())})).length}function vt(t,e){return(0,nt.Kg)(t)&&Array.isArray(e)?!!e.filter((function(e){return(t||"").toLocaleLowerCase().includes((e||"").toLocaleLowerCase())})).length:!(!Array.isArray(t)||!Array.isArray(e))&&e.some((function(e){return t.some((function(t){var n=(0,nt.Kg)(t)?t.toLocaleLowerCase():t,r=(0,nt.Kg)(e)?e.toLocaleLowerCase():e;return n.includes(r)}))}))}function pt(t,e){return Array.isArray(t)&&Array.isArray(e)?!!(0,nt.E$)(t,e).length:(e||[]).includes(t)}function bt(t){return(0,nt.Kg)(t)&&ot()(t).isValid()}function mt(t){return(0,nt.Kg)(t)&&/^(now)[-+]([0-9]|[1-9][0-9])(s|h|d|w|m|M)/g.test(t)}function yt(t){var e=t.substring(t.length-1),n=ct[e];if(!n)throw new Error("date unit ".concat(e," not supported"));var r=t[3],o=Number(t.substring(4,t.length-1));return"-"===r?ot()().subtract(o,n).toJSON():ot()().add(o,n).toJSON()}function gt(t,e){var n=Object.keys(t)[0],r=t[n],o=r.operator,i=r.value;switch(o){case"is_set":case"not_set":return function(t,e){switch(t){case"is_set":return lt(e);case"not_set":return!lt(e);default:throw new Error("operation ".concat(t," not supported"))}}(o,st(n,e));case"equals":case"not_equals":case"gt":case"gte":case"lt":case"lte":case"in":case"not_in":case"contains":case"not_contains":case"contains_any_of":case"not_contains_any_of":return function(t,e,n){switch(t){case"equals":return ft(e,n);case"not_equals":return!ft(e,n);case"gt":return function(t,e){if(mt(e)){var n=yt(e);return Date.parse(t)>Date.parse(n)}return bt(e)?Date.parse(t)>Date.parse(e):Number(t)>Number(e)}(e,n);case"gte":return function(t,e){if(mt(e)){var n=yt(e);return Date.parse(t)>=Date.parse(n)}return bt(e)?Date.parse(t)>=Date.parse(e):Number(t)>=Number(e)}(e,n);case"lt":return function(t,e){if(mt(e)){var n=yt(e);return Date.parse(t)<Date.parse(n)}return bt(e)?Date.parse(t)<Date.parse(e):Number(t)<Number(e)}(e,n);case"lte":return function(t,e){if(mt(e)){var n=yt(e);return Date.parse(t)<=Date.parse(n)}return bt(e)?Date.parse(t)<=Date.parse(e):Number(t)<=Number(e)}(e,n);case"in":return pt(e,n);case"not_in":return!pt(e,n);case"contains":return dt(e,n);case"not_contains":return!dt(e,n);case"contains_any_of":return vt(e,n);case"not_contains_any_of":return!vt(e,n);default:throw new Error("operation ".concat(t," not supported"))}}(o,st(n,e),i);default:throw new Error("operation ".concat(o," not supported"))}}var ht=function(t,e,n){var r={session:e,customer:n};return function(t,e){var n;return null===(n=t.criteria.and)||void 0===n?void 0:n.every((function(t){return gt(t,e)}))}(t,r)&&function(t,e){var n=t.criteria.or;return!n||!n.length||!!n.find((function(t){return gt(t,e)}))}(t,r)},wt=function(t){var e;return null===(e=t.actions)||void 0===e?void 0:e.find((function(t){var e,n;return"chat"===(null==t||null===(e=t.input)||void 0===e||null===(n=e.pendingAssistant)||void 0===n?void 0:n.channel)}))},Ot=u(9774),jt=function(t){var e=(0,n.KA)().sessions,r=(0,Ot.y)(t);return r?Promise.reject(r):Promise.resolve(e[t]).then((function(e){return e?Promise.resolve(e):(0,p.Ht)(t).then((function(t){return t.data}))})).then((function(e){return function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.id,o=t.attributes.pubnub.data.channels.find((function(t){return"meta-conversation"===t.type}));return(0,s.Z)().then((function(t){var i=t;if((0,n.KA)().isPubNubConnected&&o){var u,a,c={message:{eventType:"read"},channel:o.name};return null===(u=i.getMetaPubNub())||void 0===u||null===(a=u.instance)||void 0===a?void 0:a.publish(c).then((function(){e||((0,n.yj)(r),(0,Ot.r)(r))}))}}))}(e,!0).catch((function(){})),(0,p.CU)(t)})).then((function(){(0,n.yj)(t),(0,Ot.r)(t)})).catch((function(t){return(0,l.H)(t,{message:"Failed to mark session as read"}),Promise.reject(t)}))},St=u(991);function Pt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;return{get:function(e){return new Promise((function(n,r){var o=t.get(e);void 0===o?r():n(o)}))},set:function(e,n){return new Promise((function(r){t.set(e,n),r()}))},toKey:function(t){return Promise.resolve(JSON.stringify(t))}}}function At(t,e){var n=e||Pt(),r=n.get,o=n.set,i=n.toKey;return function(){for(var e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];return i(n).catch((function(){})).then((function(e){return void 0===e?t.apply(void 0,n):r(e).catch((function(){return t.apply(void 0,n).then((function(t){return o(e,t).then((function(){return t})).catch((function(){return t}))}))}))}))}}var _t=u(2838);function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach((function(e){Ct(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ct(t,e,n){return(e=function(t){var e=function(t){if("object"!=kt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mt=At((function(t){var n=(0,_t.N0)(t);if(n)return Promise.reject(n);var r=t.assistant,o=t.dialog,i=t.assistantOptions,u={assistant:r,dialog:o},a=null!=i&&i.emulation?Et(Et({},u),{},{assistantOptions:i}):u;return(0,e.bE)((0,_t.AG)(t),{body:JSON.stringify(a)})}),Pt(_t.eI)),Dt=["body"],Tt=function(t){var e,n,r;return{aiUserId:null==t||null===(e=t.machineUser)||void 0===e?void 0:e.id,publicName:null==t||null===(n=t.machineUser)||void 0===n?void 0:n.displayName,avatarUrl:null==t||null===(r=t.machineUser)||void 0===r?void 0:r.avatarUrl}},xt=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return t.body,function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,Dt)}))},Nt="online",Ft="offline",$t=function(t){return{availability:t}},Ut=function(t){var e=new Date,n=e.getTime()+6e4*e.getTimezoneOffset();return new Date(n+t)},Kt=u(3712),Bt=function(t,r){var o;null!=t&&t.jwtToken?o=function(t){var n=function(t){if(!t.externalToken)return new Error("Missing one or more of the required properties: jwtToken")}(t);return n?Promise.reject(n):(0,c.a)().then((function(){return(0,e.bE)("/c/v1/identity",{body:JSON.stringify(t)}).then((function(t){return t}))}))}({externalToken:null==t?void 0:t.jwtToken}).then((function(t){var e,r,o={identified:(r=(e=t).data.attributes).verified,email:r.email,externalId:r.externalId,customerId:e.data.relationships.customer.data.id};return(0,n.fF)("customerId",o.customerId),(0,n.fF)("externalId",o.externalId),(0,n.fF)("email",o.email),(0,n.fF)("verified",o.identified),o})):o=(0,c.u)().then((function(t){var e,r,o,i,u=(0,n.KA)(),a=null==t||null===(e=t.data)||void 0===e||null===(r=e.relationships)||void 0===r||null===(o=r.customer)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.id;return(0,n.fF)("customerId",a),{customerId:a,identified:!!u.verified,externalId:u.externalId,email:u.email}}));return o.then((function(t){var e,o,i=(0,n.KA)();return Array.isArray(null===(e=i.settings)||void 0===e?void 0:e.assistantRules)&&(null===(o=i.settings)||void 0===o?void 0:o.assistantRules.length)>0&&t.identified?(0,Kt.He)().catch((function(t){"function"==typeof r&&r(null,t),(0,m.M)(b.QU,null,t),(0,l.H)(t,{message:"Failed to get customer context:"})})).then((function(){return t})):t})).then((function(e){var o=function(){"function"==typeof r&&r(e),(0,m.M)(b.QU,e)};if((0,n.fF)("isPubNubConnected",!1),null!=t&&t.brandId||null!=t&&t.assistantId)return v({brandId:null==t?void 0:t.brandId,assistantId:null==t?void 0:t.assistantId},o);var i=(0,n.KA)().orgId;return(0,s.Z)({customerId:e.customerId,orgId:i,cb:o}).then((function(){return e}))})).catch((function(t){"function"==typeof r&&r(null,t),(0,m.M)(b.QU,null,t),(0,l.H)(t,{message:"Failed to identify customer:"})}))},Lt=function(t){var e=t.userIdentifier,n=t.externalId,r=t.email;return t.verified&&[n,r].includes(e)},Ht=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]\.)+[a-zA-Z]{2,}))$/,zt=function(t){return Ht.test(t)};function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(n),!0).forEach((function(e){Wt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Wt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Rt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Rt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zt=function t(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(t){var n=function(t){if(!(null==t?void 0:t.lang))return new Error("Missing one or more of the required properties: lang")}(t);return n?Promise.reject(n):(0,e.Jt)(function(t){var e=null==t?void 0:t.page,n=null==t?void 0:t.lang,o=null==t?void 0:t.knowledgeBaseId,i=(0,r.A0)(n),u="/p/v4/kb/categories?pageSize=1000&page=".concat(e);return i&&(u="".concat(u,"&lang=").concat(i)),o&&(u="".concat(u,"&knowledgeBaseId=").concat(o)),u}(t))}({page:o,lang:null==n?void 0:n.lang,knowledgeBaseId:null==n?void 0:n.knowledgeBaseId}).then((function(e){var r,u=e.data.reduce((function(t,e){var n,r;return t[e.id]=(r=(n=e).attributes,{categoryId:n.id,parentCategory:r.parent,childCategories:r.categoryPositions,title:r.title,description:r.description}),t}),i),a=qt(qt({},i),u);return null!==(r=e.links)&&void 0!==r&&r.next?t(n,o+1,a):i}))},Yt=function t(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(t){return(0,e.Jt)(function(t){var e=t.lang,n=t.knowledgeBaseId,o=t.page,i=(0,r.A0)(e),u="/p/v4/kb/articles",a=[];return i&&a.push("lang=".concat(i)),n&&a.push("knowledgeBaseId=".concat(n)),o&&a.push("page=".concat(o)),a.length&&(u="".concat(u,"?").concat(a.join("&"))),u}({lang:t.lang,knowledgeBaseId:t.knowledgeBaseId,page:t.page}))}({lang:n.lang,knowledgeBaseId:n.knowledgeBaseId,page:o}).then((function(e){var r;return e.data.find((function(t){return t.attributes.slug===n.articleSlug&&t.attributes.hash===n.articleHash}))||(null!=e&&null!==(r=e.links)&&void 0!==r&&r.next?t(n,o+1):null)}))},Vt=u(3064),Gt=function(t,n){var o=function(t){var e=null==t?void 0:t.articleId,n=null==t?void 0:t.knowledgeBaseId,r=null==t?void 0:t.rating;if(!e||!n||!r)return new Error("Missing one or more of the required properties: articleId, knowledgeBaseId, and rating")}(t);return o?Promise.reject(o):function(t){return(0,e.bE)((n=t.articleId,o=t.lang,i=(0,r.A0)(o),"/p/v4/kb/articles/".concat(n,"/feedback?lang=").concat(i)),{body:JSON.stringify({rating:t.rating,knowledgeBaseId:t.knowledgeBaseId})}).then((function(t){return t.data}));var n,o,i}({knowledgeBaseId:t.knowledgeBaseId,articleId:t.articleId,lang:t.lang,rating:t.rating}).then((function(t){n&&n(t)}))},Qt=function(t){return function(t){var n=function(t){var e=null==t?void 0:t.categoryId,n=null==t?void 0:t.lang;if(!e||!n)return new Error("Missing one or more of the required properties: lang, categoryId")}(t);return n?Promise.reject(n):(0,e.Jt)(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=t.categoryId,o=t.lang,i=t.knowledgeBaseId,u=(0,r.A0)(o),a="/p/v4/kb/categories/".concat(n,"?includeChildren=true&childrenLimit=").concat(e);return u&&(a="".concat(a,"&lang=").concat(u)),i&&(a="".concat(a,"&knowledgeBaseId=").concat(i)),a}(t))}(t).then((function(t){var e,n=t.data.attributes.positions,r=null==t||null===(e=t.included)||void 0===e?void 0:e.filter((function(t){return"article"===t.type}));return r&&r.length?function(t,e){return t.reduce((function(t,n){var r=e.find((function(t){return t.attributes.article===n}));if(r){var o=(0,Vt.$)(r);t.push(o)}return t}),[])}(n,r):[]}))},Xt=function(t,n){return function(t){return function(t){return(0,e.Jt)((n=t.knowledgeBaseId,o=null==t?void 0:t.lang,i=(0,r.A0)(o),"/p/v4/kb/featured-articles?knowledgeBaseId=".concat(n,"&lang=").concat(i))).then((function(t){return t.data}));var n,o,i}(t).then((function(t){var e=t;return e&&e.length?e.map((function(t){return(0,Vt.$)(t)})):[]}))}(t).then((function(t){var e=(0,Vt.u)(t);"function"==typeof n&&n(e)})).catch((function(t){"function"==typeof n&&n(null,t),(0,l.H)(t,{message:"Failed to get articles"})}))},te=function(){return(0,n.KA)().settings},ee=At((function(){var t=te();return null!=t&&t.knowledgeBaseId?Promise.resolve(t.knowledgeBaseId):(0,e.Jt)("/p/v4/kb/knowledge-bases/self").then((function(t){return t.data.id}))})),ne=At((function(t){return(0,e.Jt)((n=t.knowledgeBaseId,o=t.lang,i=(0,r.A0)(o),"/p/v4/kb/knowledge-bases/".concat(n,"?chat=true&lang=").concat(i)));var n,o,i})),re=u(4513),oe=function(t){return ee().then((function(e){return ne({knowledgeBaseId:e}).then((function(e){var n=function(t){var e,n,r=t.data.attributes,o=r.domain,i=r.subdomain,u=null!=o&&o.domainName?"https://".concat(null==o?void 0:o.domainName,"/"):function(t){return"https://".concat(t,".").concat((e=(0,re._)().baseUrlDomain,null!=e&&e.includes("helpapp")?"helpapp":null!=e&&e.includes("helpsimply")?"helpsimply":"kustomer"),".").concat("prod2"===(0,re._)().pod?"support":"help","/");var e}(i);return{id:t.data.id,articleSurvey:null==t||null===(e=t.data)||void 0===e||null===(n=e.attributes)||void 0===n?void 0:n.articleSurvey,knowledgeBaseDomain:u}}(e);return"function"==typeof t&&t(n),n}))})).catch((function(e){return"function"==typeof t&&t(null,e),(0,l.H)(e,{message:"Failed to get knowledge base information"}),{}}))};function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){ce(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ce(t,e,n){return(e=function(t){var e=function(t){if("object"!=ie(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ie(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var se=function(t,n){return(o=t,i=function(t){var e=null==t?void 0:t.term,n=null==t?void 0:t.lang;if(!e||!n)return new Error("Missing one or more of the required properties: lang, term")}(o),i?Promise.reject(i):(0,e.Jt)(function(t){var e=t.term,n=t.lang,o=t.knowledgeBaseId,i=(0,r.A0)(n),u="/p/v4/kb/articles/search?pageSize=100&page=1&term=".concat(e,"&knowledgeBaseId=").concat(o);return i&&(u="".concat(u,"&lang=").concat(i)),u}(o))).then((function(t){var e=t.data.map((function(t){return(0,Vt.$)(t)})),r=(0,Vt.u)(e);"function"==typeof n&&n(r)})).catch((function(t){"function"==typeof n&&n(null,t),(0,l.H)(t,{message:"Failed to search articles"})}));var o,i};function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var fe=function(t,e,n){var r=!0,o=e.replace(/\/$/,"");if(!t)return!1;var i,u=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return le(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw i}}}}(t);try{for(u.s();!(i=u.n()).done;){var a=i.value.website_url,c=a.operator,s=a.value,l="equals"===c,f="not_equals"===c,d="not_contains"===c,v=e===s||o===s;if("contains"===c&&e.includes(s)||d&&!e.includes(s)||l&&v||f&&e!==s)r=!1;else if("and"===n){r=!0;break}}}catch(t){u.e(t)}finally{u.f()}return r},de=u(9860),ve="online",pe="offline",be=u(420),me=u(5564),ye=function(){window.KustomerMain={fetchSettings:o,init:function(t,e){v(t,e)},createConversation:function(t,e){!function(t,e){(0,p.jw)(t).then((function(t){var e=t.data.relationships.customer.data.id,r=(0,n.KA)().orgId;return(0,s.Z)({customerId:e,orgId:r}).then((function(e){return{pubnub:e,response:t}}))})).then((function(t){var r,o,i,u=t.pubnub,a=t.response;if(!(0,n.KA)().isPubNubConnected)throw new Error("Failed to connect to Pubnub");var c=((null==a||null===(r=a.data)||void 0===r?void 0:r.attributes.pubnub.data)||{}).channels.find((function(t){return"shared-conversation"===t.type})),s=null==c?void 0:c.name,l=s?[s]:void 0;if(l){var f,d,v={status:g({conversationChannels:l},(function(t,n){var r,o,i,c,s=null;n?null===(i=u.getMetaPubNub())||void 0===i||null===(c=i.instance)||void 0===c||c.unsubscribe({channels:l}):s=function(t){var e=t.data.id,n=t.data.attributes;return{conversationId:e,createdAt:n.createdAt,ended:!!n.lockedAt,isInAssistantMode:n.isInAssistantMode,name:n.name}}(a),null==u||null===(r=u.getMetaPubNub())||void 0===r||null===(o=r.instance)||void 0===o||o.removeListener(v),(0,m.M)(b.vn,s,n),"function"==typeof e&&e(s,n)}))};null===(f=u.getMetaPubNub())||void 0===f||null===(d=f.instance)||void 0===d||d.addListener(v)}return null===(o=u.getMetaPubNub())||void 0===o||null===(i=o.instance)||void 0===i||i.subscribe({channels:l}),u})).catch((function(t){"function"==typeof e&&e(null,t),(0,m.M)(b.vn,null,t),(0,l.H)(t,{message:"Failed to create conversation:"})}))}(t,e)},handoff:function(t,e){return function(t,e){var r=(0,n.KA)();if(!r||!r.settings){var o=new Error("SDK not initialized. Call KustomerCore.init() first.");return"function"==typeof e&&e(null,o),Promise.reject(o)}var i=function(t){if(!t)return new Error("Handoff parameters are required");var e=t.messages,n=t.from,r=t.active;if(!Array.isArray(e))return new Error("Messages must be an array");var o=e.length;if(o<2)return new Error("At least ".concat(2," messages are required (found ").concat(o,")"));if(o>100)return new Error("Maximum ".concat(100," messages allowed (found ").concat(o,")"));var i=e.some((function(t){return"in"===t.direction})),u=e.some((function(t){return"out"===t.direction}));if(!i)return new Error("A handoff conversation must include at least one inbound message from the customer to establish context");if(!u)return new Error("A handoff conversation must include at least one outbound message to show the conversation flow");if(u&&(!n||"string"!=typeof n||""===n.trim()))return new Error("'from' parameter is required when outbound messages are present");if("boolean"!=typeof r)return new Error("'active' must be a boolean value");for(var a=0;a<e.length;a++){var c=e[a],s=A(c,a);if(s)return s}}(t);return i?("function"==typeof e&&e(null,i),Promise.reject(i)):function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.fetchTrackingToken,r=void 0===n?S.fetchTrackingToken:n,o=e.httpPost,i=void 0===o?S.httpPost:o,u=e.endpoint,a=void 0===u?S.endpoint:u;return r().then((function(){var e=t.active,n=t.from,r=t.messages,o=t.brand,u=t.externalId,c=t.lang,s=O(O(O({active:e,from:n,messages:r.map((function(t){return{date:t.date,direction:t.direction,body:t.body}}))},o&&{brand:o}),u&&{externalId:u}),c&&{lang:c});return i(a,{body:JSON.stringify(s)})}))}(t).then((function(t){return(0,n.Y_)(t.data),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.fetchTrackingToken,r=void 0===n?_.fetchTrackingToken:n,o=e.updateStore,i=void 0===o?_.updateStore:o,u=e.handleError,a=void 0===u?_.handleError:u;return r().then((function(e){var n,r,o,u,a=null==e||null===(n=e.data)||void 0===n||null===(r=n.relationships)||void 0===r||null===(o=r.customer)||void 0===o||null===(u=o.data)||void 0===u?void 0:u.id;return a&&i("customerId",a),t})).catch((function(e){return a(e,{message:"Failed to refresh customer identity after handoff (continuing):"}),t}))}(t)})).then((function(t){var e,r,o,i=null===(e=t.data.relationships)||void 0===e||null===(r=e.customer)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.id;if(!i||"string"!=typeof i)throw new Error("Invalid handoff response: missing customer ID in response data");var u=(0,n.KA)().orgId;return(0,s.Z)({customerId:i,orgId:u}).then((function(e){return{pubnub:e,response:t}}))})).then((function(t){var r=t.pubnub,o=t.response;if((0,n.KA)().isPubNubConnected){var i,u,a,c,s,f=((null==o||null===(i=o.data)||void 0===i||null===(u=i.attributes)||void 0===u||null===(a=u.pubnub)||void 0===a?void 0:a.data)||{}).channels,d=null==f?void 0:f.find((function(t){return"shared-conversation"===t.type})),v=null==d?void 0:d.name,p=v?[v]:void 0;p&&(null===(c=r.getMetaPubNub())||void 0===c||null===(s=c.instance)||void 0===s||s.subscribe({channels:p}))}else(0,l.H)(new Error("PubNub not initialized after handoff"),{message:"Failed to connect to PubNub after handoff (handoff succeeded):"});var y=function(t){var e=t.data.id,n=t.data.attributes;return{conversationId:e,createdAt:n.createdAt,ended:!!n.lockedAt,isInAssistantMode:n.isInAssistantMode,session:t.data}}(o);return(0,m.M)(b.vn,y,void 0),"function"==typeof e&&e(y,void 0),y})).catch((function(t){throw"function"==typeof e&&e(null,t),(0,m.M)(b.vn,null,t),(0,l.H)(t,{message:"Failed to create handoff conversation:"}),t}))}(t,e)},addListener:function(t,e){!function(t,e){!1!==(0,m.v)(t)&&"function"==typeof e&&(0,n.cO)(t,e)}(t,e)},removeListener:function(t,e){!function(t,e){!1!==(0,m.v)(t)&&"function"==typeof e&&(0,n.kw)(t,e)}(t,e)},sendMessage:function(t,e){!function(t,e){var n,r=null==t?void 0:t.conversationId,o=null==t?void 0:t.body,i=null==t?void 0:t.payload,u=null==t?void 0:t.attachments,a=null==t?void 0:t.lastDeflection,c=null==t?void 0:t.isInAssistantMode,s=null==t?void 0:t.initAssistantPayload,f=null==t?void 0:t.lang,d=null==t?void 0:t.assistantOptions;(0,k.oH)(r,{body:o,payload:i,attachments:u,lastDeflection:a,isInAssistantMode:c,initAssistantPayload:s,lang:f,assistantOptions:d}).then((function(t){n=t;var e=t.data.id;if(null!=u&&u.length)return(0,k.R9)(e)})).then((function(t){var r=null==t?void 0:t.data,o=(0,I.e)(n.data,r);(0,m.M)(b.rh,o),"function"==typeof e&&e(o)})).catch((function(t){if("function"==typeof e&&e(null,t),423===t.status){var n={conversationId:r,ended:!0};(0,m.M)(b.LM,n)}(0,m.M)(b.rh,null,t),(0,l.H)(t,{message:"Failed to send message:"})}))}(t,e)},getConversations:function(t,e){!function(t,e){(0,c.a)().then((function(){return(0,p.S5)(t)})).then((function(t){var r=function(t){var e=(0,n.KA)().useLegacyConversationPreview;return{conversations:t.data.filter((function(t){return!0!==t.attributes.deleted})).map((function(t){var n,r,o={preview:t.attributes.preview,lastResponder:null===(n=t.attributes.previewDetails)||void 0===n?void 0:n.lastResponder,createdAt:t.attributes.createdAt,lastMessageAt:t.attributes.lastMessageAt,conversationId:t.id,ended:!!t.attributes.lockedAt,isInAssistantMode:t.attributes.isInAssistantMode},i=e?void 0:null!==(r=t.attributes.name)&&void 0!==r?r:void 0;return void 0!==i?M(M({},o),{},{name:i}):o})),pages:T(t.links)}}(t);return"function"==typeof e&&e(r),t})).catch((function(t){"function"==typeof e&&e(null,t),(0,l.H)(t,{message:"Failed to get conversations for customer:"})}))}(t,e)},getConversation:function(t,e){!function(t,e){var r=null==t?void 0:t.conversationId;(0,p.Ht)(r).then((function(t){var r,o,i,u,a,c,s,l,f,d=(r=t.data,i=r.id,u=r.attributes,a=u.createdAt,c=u.preview,s=u.lastMessageAt,l=u.lockedAt,f=(0,n.KA)().useLegacyConversationPreview?void 0:null!==(o=r.attributes.name)&&void 0!==o?o:void 0,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){F(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({conversationId:i,createdAt:a,preview:c,lastMessageAt:s,ended:!!l},void 0!==f&&""!==f?{name:f}:{}));return"function"==typeof e&&e(d),t})).catch((function(t){(0,l.H)(t,{message:"Failed to get conversation:"}),"function"==typeof e&&e(null,t)}))}(t,e)},getMessages:function(t,e){!function(t,e){var r,o=null==t?void 0:t.conversationId;(0,s.Z)().then((function(t){return r=t,function(t){var e=(0,n.kk)(t);return e?Promise.resolve(e):(0,p.Ht)(t).then((function(){return(0,n.kk)(t)}))}(o)})).then((function(t){var e,i,u,a,c=null==t||null===(e=t.attributes)||void 0===e||null===(i=e.pubnub)||void 0===i||null===(u=i.data)||void 0===u?void 0:u.channels,s=(0,n.KA)(),f=(null==s?void 0:s.settings)||{},d=f.showTypingIndicatorCustomerWeb,v=f.showTypingIndicatorWeb,p=d||v;if(!c)throw new Error("Conversation PubNub channels not found");var m=c.find((function(t){return"conversation"===t.type}));if(null==s||!s.isPubNubConnected)return Promise.reject(new Error("PubNub isn't connected"));if(!m)return Promise.reject(new Error("No conversation channel found for conversation: ".concat(o)));var y=c.find((function(t){return"conversation"===t.type}));if(p&&y){var g,h,w=y.name.replace("ext-convo-","shrd-convo-");w.length&&(null===(g=r.getMetaPubNub())||void 0===g||null===(h=g.instance)||void 0===h||h.subscribe({channels:[w]}))}return function(t,e){return new Promise((function(n,r){e||r(new Error("PubNub instance not found")),function o(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.fetchMessages({channels:[t],start:i,count:b.ZW}).then((function(e){var r,i=(null==e||null===(r=e.channels)||void 0===r?void 0:r[t])||[],a=[].concat(J(u),J(i));if(null==i||!i.length||i.length<b.ZW)return n({messages:a});var c=i[0].timetoken;return o(c,a)})).catch((function(t){(0,l.H)(t,{message:"Failed to get messages from pubnub"}),r(t)}))}(0)}))}(m.name,null===(a=r.getConversationPubNub())||void 0===a?void 0:a.instance)})).then(V).then((function(t){var r=function(t,e){var r={satisfaction:{},messages:[]},o=[],i=new Map,u=(0,n.KA)().enableUrlUnfurling;return null!=t&&t.length&&(t.forEach((function(t){if(t.message.name===y.nV||t.message.name===y.gV){var e,n,a=(0,I.e)(t.message.data,null==t||null===(e=t.attachments)||void 0===e?void 0:e.data,null==t||null===(n=t.message)||void 0===n?void 0:n.included,"pubnub");i.set(a.messageId,a),r.messages.push(a)}if(t.message.name===y.UM||t.message.eventType===y.sX){var c,s,l=null==t||null===(c=t.message.included)||void 0===c?void 0:c.find((function(t){return"satisfaction"===t.type})),f=t.timetoken;r.satisfaction=(0,$.FQ)(null==t||null===(s=t.message)||void 0===s?void 0:s.data,f,l)}if(u&&(t.message.name===y.iR||t.message.name===y.xV)){var d=(0,U.s)(t.message);d&&o.push(d)}})),o.forEach((function(t){var e,n=t.originalMessageId,o=i.get(n);if(o){var u=o.unfurledPreviews||[],a=t.unfurledUrl.url;if(!u.some((function(t){return t.url===a}))){var c=H(H({},o),{},{unfurledPreviews:[].concat((e=u,function(t){if(Array.isArray(t))return B(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return B(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[t.unfurledUrl])});i.set(n,c);var s=r.messages.findIndex((function(t){return t.messageId===n}));-1!==s&&(r.messages[s]=c)}}}))),H({conversationId:e},r)}(null==t?void 0:t.messages,o);"function"==typeof e&&e(r)})).catch((function(t){(0,l.H)(t,{message:"Failed to get messages"}),"function"==typeof e&&e(null,t)}))}(t,e)},getHistoricalMessages:function(t,e){!function(t,e){var n=null==t?void 0:t.conversationId,r=(null==t?void 0:t.count)||b.nd,o=null==t?void 0:t.before;(0,k.Nz)(n,{count:r,before:o}).then(et).then((function(t){var r=function(t,e,n){var r={satisfaction:{},messages:[]};return null!=t&&t.length&&(r=t.reduce((function(t,e){var n,r,o,i,u,a,c,s,l,f,d;return"chat_message"===e.message.type&&t.messages.push((0,I.e)(e.message,null==e||null===(n=e.attachments)||void 0===n?void 0:n.data,(r=e.message,d=[],null!==(o=r.attributes)&&void 0!==o&&null!==(i=o.meta)&&void 0!==i&&i.template&&d.push({attributes:null===(l=r.attributes)||void 0===l||null===(f=l.meta)||void 0===f?void 0:f.template,type:"template"}),null===(u=r.attributes)||void 0===u||null===(a=u.meta)||void 0===a||null===(c=a.template)||void 0===c||null===(s=c.articles)||void 0===s||s.forEach((function(t){return d.push(X(X({},t),{},{type:"article"}))})),d),"historical")),t}),r)),X(X({conversationId:e},r),{},{links:n})}(null==t?void 0:t.messages,n,t.links);"function"==typeof e&&e(r)})).catch((function(t){"function"==typeof e&&e(null,t),(0,l.H)(t,{message:"Failed to get historical messages"})}))}(t,e)},getAssistant:function(t){return function(t){var e,r,o=(0,n.KA)(),i=null!==(e=t.customer)&&void 0!==e?e:o.customerContext,u=null==o||null===(r=o.settings)||void 0===r?void 0:r.assistantRules,a=!!t.proactiveOnly;if(o.testAutomationId)return{assistant:"",aiAgentTeamId:o.testAutomationId};if(Array.isArray(u))for(var c=a?u.filter((function(t){var e,n,r;return!0===(null===(e=wt(t))||void 0===e||null===(n=e.input)||void 0===n||null===(r=n.pendingAssistant)||void 0===r?void 0:r.isProactive)})):u,s=0;s<c.length;s++){var l=c[s];if(ht(l,t.session,i)){var f,d,v=null===(f=wt(l))||void 0===f||null===(d=f.input)||void 0===d?void 0:d.pendingAssistant;if(!0===(null==l?void 0:l.hasAiAutomationId))return{assistant:"",aiAgentTeamId:null==l?void 0:l.aiAutomationId};if(null!=v&&v.assistant)return{assistant:null==v?void 0:v.assistant,dialog:null==v?void 0:v.startDialog}}}return!(a||!o.settings.activeAssistant)&&{assistant:o.settings.activeAssistant}}(t)},markRead:function(t){!function(t){var e=null==t?void 0:t.conversationId,n=(0,Ot.y)(e);n?Promise.reject(n):jt(e)}(t)},markSessionAsRead:function(t){return jt(t)},getUnreadCount:function(){return(0,n.KA)().unreadCounts},endConversation:function(t,e){!function(t,e){var n=null==t?void 0:t.conversationId;(0,p.qO)(n,{locked:!0,lockReason:"customer_ended"}).then((function(t){var n=(0,St.b)(t.data);"function"==typeof e&&e(n)})).catch((function(t){"function"==typeof e&&e(null,t),(0,l.H)(t,{message:"Failed to end conversation"})}))}(t,e)},initAssistant:function(t,r){return function(t,r){var o=t.aiAgentTeamId,i=!!(0,n.KA)().testAutomationId;return(0,c.a)().then((function(){return o?(0,e.Jt)("/p/v1/automation-engine/automations-metadata"):Mt(t)})).then((function(t){var e;if(o){var n,u,a,c=null==t||null===(n=t.data)||void 0===n?void 0:n.find((function(t){return i?t.attributes.testAutomationId===o:t.attributes.liveAutomationId===o}));c||console.error("[initAssistant] No automation matched. Searched for:",{aiAgentTeamId:o,searchField:i?"testAutomationId":"liveAutomationId",isTestMode:i});var s=null==c?void 0:c.attributes,l=null==s||null===(u=s.proactive)||void 0===u||null===(a=u.chat)||void 0===a?void 0:a.messages;if(!s)return console.error("[initAssistant] Automation not found for aiAgentTeamId:",o),Promise.reject(new Error("Automation not found for AI Agent Team"));e={attributes:Tt(s),initialMessages:null!=l&&l.length?xt(l):[]}}else e=t.data;var f,d,v,p,b={assistant:null==(f=e)||null===(d=f.meta)||void 0===d?void 0:d.assistant,dialog:null==f||null===(v=f.meta)||void 0===v?void 0:v.dialog,node:null==f||null===(p=f.meta)||void 0===p?void 0:p.node,initialMessages:null==f?void 0:f.initialMessages,attributes:null==f?void 0:f.attributes};return"function"==typeof r&&r(b),b})).catch((function(t){throw"function"==typeof r&&r(null,t),new Error(t)}))}(t,r)},sendKbDeflectionClick:function(t,n){return function(t,n){return function(t){return(0,e.yJ)((0,_t.s5)(t.sessionId),{body:JSON.stringify({articles:t.articles})})}(t).then(n)}(t,n)},isChatAvailable:function(){return function(){var t=(0,n.KA)(),e=t.settings,r=t.schedule,o=e.enabled,i=e.offhoursDisplay;if(!o)return $t("disabled");var u=function(t){var e=t.timezoneOffset,n=t.holidays,r=void 0===n?[]:n,o=Ut(e);return r.filter((function(t){return t.attributes.enabled})).some((function(t){var e=new Date(t.attributes.startDate),n=new Date(t.attributes.endDate);return o>=e&&o<=n}))}(r),a=function(t){var e=t.hours,n=t.timezoneOffset,r=Ut(n),o=e[r.getDay().toString()];if(!o||!Object.keys(o).length)return!1;var i=60*r.getHours()+r.getMinutes();return!!o.find((function(t){var e=t[0],n=t[1];return i>=e&&i<=n}))}(r)&&!u;return $t(a||i===Nt?Nt:a||i!==Ft?a||"none"!==i?Nt:"hidden":Ft)}()},getChatSettings:function(){return te()},submitSatisfactionForm:function(t,r){!function(t,r){var o,i,u,a,c=t.satisfactionId,f=t.rating,d=t.submittedAt;(o=c,i={rating:f,answers:t.answers,submittedAt:d},u=t.lang,a=(0,$.jk)(o,i),a?Promise.reject(a):(0,e.yJ)((0,$.ZE)(o,u),{body:JSON.stringify(i)})).then((function(t){return function(t,e){var r,o=t.data.relationships.conversation.data.id;return(0,s.Z)().then((function(t){return r=t,(0,n.kk)(o)})).then((function(t){if(!t)return(0,p.Ht)(o)})).then((function(){return(0,n.kk)(o)})).then((function(o){var i,u,a,c=null==o||null===(i=o.attributes)||void 0===i||null===(u=i.pubnub)||void 0===u||null===(a=u.data)||void 0===a?void 0:a.channels,s=(0,n.KA)();if(!c)throw new Error("Conversation PubNub channels not found");var l=c.find((function(t){return"conversation"===t.type}));if(s.isPubNubConnected&&l){var f,d,v={message:{eventType:y.sX,data:t.data,included:t.included},channel:null==l?void 0:l.name};null===(f=r.getMetaPubNub())||void 0===f||null===(d=f.instance)||void 0===d||d.publish(v).then((function(n){var r,o=null==t||null===(r=t.included)||void 0===r?void 0:r.find((function(t){return"satisfaction"===t.type})),i=n.timetoken,u=(0,$.FQ)(t.data,i,o);"function"==typeof e&&e(u)}))}}))}(t,r)})).catch((function(t){"function"==typeof r&&r(null,t),(0,l.H)(t,{message:"Failed to submit satisfaction form"})}))}(t,r)},getTranslatedSatisfactionForm:function(t,n){!function(t,n){(function(t,n){if(!t)return Promise.reject(new Error("Satisfaction form ID is required"));var r=(0,$.gU)(t,n);return(0,e.Jt)(r)})(t.satisfactionId,t.lang).then((function(t){return"function"==typeof n&&n(t),t})).catch((function(t){"function"==typeof n&&n(null,t),(0,l.H)(t,{message:"Failed to get translated satisfaction form"})}))}(t,n)},sendTypingActivity:function(t){!function(t){var e=null==t?void 0:t.conversationId,r=null==t?void 0:t.typing;try{var o=function(t,e){return t?"boolean"!=typeof e?new Error("Typing status must be a boolean"):void 0:new Error("A conversationId must be provided.")}(e,r);if(o)throw o;var i=(0,n.KA)(),u=i.settings,a=i.sessions;if(!u.showTypingIndicatorWeb||!a[e])return;return function(t,e){return(0,s.Z)().then((function(r){var o=r,i=(0,n.KA)(),u=i.sessions[t];if(u){var a=u.attributes.pubnub.data.channels.find((function(t){return"shared-conversation"===t.type}));if(a){var c,s,l=a.name,f=e?y.x0:y.YA;i.isPubNubConnected&&(null===(c=o.getMetaPubNub())||void 0===c||null===(s=c.instance)||void 0===s||s.signal({channel:l,message:f}))}}}))}(e,r)}catch(t){(0,l.H)(t,{message:"Failed to send typing status"})}}(t)},login:function(t,e){Bt(t,e)},isLoggedIn:function(t,e){!function(t,e){var r=(null==t?void 0:t.email)||(null==t?void 0:t.externalId);if(!r)return Promise.resolve(e(!1));var o=(0,n.KA)(),i=o.externalId,u=o.email,a=o.verified;if(void 0!==a){var s=Lt({userIdentifier:r,externalId:i,email:u,verified:a});return"function"==typeof e?Promise.resolve(e(s)):s}(0,c.u)().then((function(t){var n=t.data.attributes,o=n.externalId,i=n.email,u=n.verified,a=Lt({userIdentifier:r,externalId:o,email:i,verified:u});return"function"==typeof e?e(a):a})).catch((function(t){"function"==typeof e&&e(null,t),(0,l.H)(t,{message:"Failed to check user is logged in:"})}))}(t,e)},describeCustomer:function(t,e){!function(t,e){var n,r={attributes:(n=t.attributes)?Object.entries(n).reduce((function(t,e){var n,r=e[0],o=e[1];return"phones"!==r&&"sharedPhones"!==r||(n=o.map((function(t){return{phone:t}}))),"emails"!==r&&"sharedEmails"!==r||!Array.isArray(o)||(n=o.filter((function(t){return"string"==typeof t})).filter(zt).map((function(t){return{email:t}}))),t[r]=n||o,t}),{}):{},custom:t.customAttributes};(0,Kt.BQ)(r).then((function(t){var n=function(t){var e,n,r,o=t.data,i=o.attributes,u=o.id,a=i.custom,c=null===(e=i.sharedEmails)||void 0===e?void 0:e.map((function(t){return t.email})),s=null===(n=i.sharedPhones)||void 0===n?void 0:n.map((function(t){return t.phone})),l=null===(r=i.sharedSocials)||void 0===r?void 0:r.map((function(t){return{username:t.username,type:t.type}}));return{customerId:u,custom:a,sharedEmails:c,sharedPhones:s,sharedSocials:l,emails:c,phones:s,socials:l}}(t);"function"==typeof e&&e(n)})).catch((function(t){"function"==typeof e&&e(null,t),(0,l.H)(t,{message:"Failed to describe customer:"})}))}(t,e)},describeConversation:function(t,n){!function(t,n){(function(t){var n=function(t){var e=null==t?void 0:t.conversationId,n=null==t?void 0:t.custom;return e?n?void 0:new Error("Missing one or more of the required properties: customAttributes"):new Error("A conversationId must be provided.")}(t);if(n)return Promise.reject(n);var r=t.conversationId,o=t.custom;return(0,e.F6)("/c/v2/conversations/".concat(r),{body:JSON.stringify({custom:o})})})({conversationId:null==t?void 0:t.conversationId,custom:null==t?void 0:t.customAttributes}).then((function(t){var e,r,o=(r=(e=t.data).attributes,{conversationId:e.id,custom:null==r?void 0:r.custom});"function"==typeof n&&n(o)})).catch((function(t){"function"==typeof n&&n(null,t),(0,l.H)(t,{message:"Failed to describe conversation:"})}))}(t,n)},getCategories:function(t,n){!function(t,n){var r={categories:{},rootCategory:{}};(function(t){return(0,e.Jt)(function(t){return null!=t&&t.knowledgeBaseId?"/p/v4/kb/categories/root?knowledgeBaseId=".concat(null==t?void 0:t.knowledgeBaseId):"/p/v4/kb/categories/root"}(t))})(t).then((function(e){var n,o,i;return r.rootCategory=(o=(n=e.data).attributes,i=n.id,{childCategories:o.categoryPositions,categoryId:i}),Zt(t)})).then((function(t){var e=r.rootCategory,o=e.categoryId;r.categories=t,r.categories[o]=e,"function"==typeof n&&n(r)})).catch((function(t){"function"==typeof n&&n(null,t),(0,l.H)(t,{message:"Failed to get categories"})}))}(t,n)},getArticles:function(t,e){!function(t,e){Qt(t).then((function(t){var n=(0,Vt.u)(t);"function"==typeof e&&e(n)})).catch((function(t){"function"==typeof e&&e(null,t),(0,l.H)(t,{message:"Failed to get articles"})}))}(t,e)},getFeaturedArticles:function(t,e){Xt(t,e)},getKnowledgeBaseConfig:function(t){return oe(t)},getArticleById:function(t,n){!function(t,n){(function(t){var n=function(t){var e=null==t?void 0:t.articleId,n=null==t?void 0:t.lang;if(!e||!n)return new Error("Missing one or more of the required properties: articleId, lang")}(t);return n?Promise.reject(n):(0,e.Jt)(function(t){var e=t.articleId,n=t.lang,o=t.knowledgeBaseId,i=(0,r.A0)(n),u="/p/v4/kb/articles/:articleId".replace(":articleId",e),a=[];return i&&a.push("lang=".concat(i)),o&&a.push("knowledgeBaseId=".concat(o)),a.length&&(u="".concat(u,"?").concat(a.join("&"))),u}(t))})(t).then((function(t){var e=(0,Vt.$)(t.data);"function"==typeof n&&n(e)})).catch((function(t){"function"==typeof n&&n(null,t),console.error("Failed to get article",t)}))}(t,n)},getArticleBySlug:function(t,e){return function(t,e){return Yt(t).then((function(t){var n=null;return t&&(n=(0,Vt.$)(t)),"function"==typeof e&&e(n),n})).catch((function(t){"function"==typeof e&&e(null,t),console.error("Failed to get article",t)}))}(t,e)},submitArticleFeedback:function(t,e){return Gt(t,e)},updateArticleFeedback:function(t,n){return function(t,n){var r=function(t){var e,n=null==t?void 0:t.articleId,r=null==t?void 0:t.feedbackId,o=(null==t||null===(e=t.suggestedReasons)||void 0===e?void 0:e.length)||t.writtenFeedback;if(!n||!r||!o)return new Error("Missing one or more of the required properties: articleId, feedbackId, and suggestedReasons or writtenFeedback")}(t);return r?Promise.reject(r):function(t){return(0,e.F6)((n=t.articleId,r=t.id,"/p/v4/kb/articles/".concat(n,"/feedback/").concat(r)),{body:JSON.stringify({suggestedReasons:t.suggestedReasons,writtenFeedback:t.writtenFeedback})}).then((function(t){return t.data}));var n,r}({articleId:t.articleId,id:t.feedbackId,suggestedReasons:t.suggestedReasons||[],writtenFeedback:t.writtenFeedback||""}).then((function(t){n&&n(t)}))}(t,n)},searchArticles:function(t,e){!function(t,e){var r,o=(0,n.KA)(),i=(null==t?void 0:t.knowledgeBaseId)||(null==o||null===(r=o.settings)||void 0===r?void 0:r.knowledgeBaseId);i?se(ae(ae({},t),{},{knowledgeBaseId:i}),e):ee().then((function(n){se(ae(ae({},t),{},{knowledgeBaseId:n}),e)}))}(t,e)},isUrlAllowed:function(t){return function(t){try{var e=function(t){if("string"!=typeof(null==t?void 0:t.url))throw Error("A url must be provided.")}(t);if(e)throw e;return{allowed:!function(t){var e=(0,n.KA)().settings.domainCriteria;if(!e)return!1;var r=e.or,o=e.and,i=fe(o,t,"and"),u=fe(r,t,"or"),a=!1;return o&&r?a=!(!i&&!u):r?a=u:o&&(a=i),a}(null==t?void 0:t.url)}}catch(t){(0,l.H)(t,{message:"Failed to determine if url is allowed"})}}(t)},logout:function(t){!function(t){try{(0,n.ez)(),(0,i.NS)(),Bt({},(function(e,n){"function"==typeof t&&t(e,n),(0,m.M)(b.hR,e,n)}))}catch(e){"function"==typeof t&&t(null,e),e instanceof Error&&(0,m.M)(b.hR,null,e),(0,l.H)(e,{message:"Failed to logout"})}}(t)},sendPresenceActivity:function(t){!function(t){var e=(0,n.KA)(),r=e.orgId,o=e.customerId;if(o)try{var i=function(t){var e=null==t?void 0:t.presence;return e?[pe,ve].includes(e)?void 0:new Error("presence must be one of: online, offline"):new Error("A presence value must be provided.")}(t);if(i)throw i;return(0,s.Z)().then((function(n){var i,u,a,c,s=n,l=null==t?void 0:t.presence;e.isPubNubConnected&&(l===ve&&(null===(i=s.getMetaPubNub())||void 0===i||null===(u=i.instance)||void 0===u||u.subscribe({channels:[(0,de.u$)(o,r)],withPresence:!0})),l===pe&&(null===(a=s.getMetaPubNub())||void 0===a||null===(c=a.instance)||void 0===c||c.unsubscribe({channels:[(0,de.u$)(o,r)]})))}))}catch(t){return void(0,l.H)(t,{message:"Failed to send presence acitivity"})}}(t)},stop:function(){return(0,s.Z)().then((function(t){(0,n.ez)(),t.stopPubNub(),(0,n.fF)("isPubNubConnected",!1)}))},kustomerEventCount:function(t){(0,me.Oc)(t)},kustomerEventTimerStart:function(t){(0,me._s)(t)},kustomerEventTimerStop:function(t){(0,me.wb)(t)}};var t=new CustomEvent("kustomer_core_main_ready");window.dispatchEvent(t);var u=(0,i.XL)(window);u&&u!==window&&u.dispatchEvent(t)};(0,t.sD)().then((function(){var t=document.querySelector("[data-kustomer-api-key]"),e=(0,be.m)(t);e&&(0,i.kl)(e),ye()}))}()}();
//# sourceMappingURL=core-main.0ee930de30158618ff41.js.map